{"ast":null,"code":"var _jsxFileName = \"/home/matheus/Documents/UNB/MDS/ObraCerta/front/src/pages/Cadastro/index.js\";\nimport React, { Component } from 'react';\nimport Button from '../../components/Button';\nimport Input from '../../components/Input';\nimport Footer from '../../components/Footer';\nimport GlobalStyle from './styles';\nimport Space from '../../components/Space';\nimport Input2Mask from '../../components/InputMask';\nimport Alert from '../../components/Alert';\nimport Navbar from '../../components/Navbar';\nimport api from '../../services/api';\n/**\n* Representauma  página de cadastro, possui 3 atributos state,url e UserData.\n* state consiste no conjunto de estados da tela, desde os inputs do usuario até os erros possiveis\n* url é a rota que será usada para requisições ao back\n* UserData são os dados do novo usuário já validados, separados para o envio da requisição\n*/\n\nclass Cadastro extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleTermsClicked = () => {\n      this.setState({\n        terms: !this.state.terms\n      });\n    };\n\n    this.handleNameChange = event => {\n      this.setState({\n        name: event.target.value\n      });\n    };\n\n    this.handleEmailChange = event => {\n      this.setState({\n        email: event.target.value\n      });\n    };\n\n    this.handlePasswordChange = event => {\n      this.setState({\n        password: event.target.value\n      });\n    };\n\n    this.handlePhoneChange = event => {\n      this.setState({\n        phone: event.target.value\n      });\n    };\n\n    this.handleConfirmPasswordChange = event => {\n      this.setState({\n        confirm_password: event.target.value\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      var valid = this.validate();\n      const headers = {\n        'content-type': 'application/json'\n      };\n\n      if (valid) {\n        api.post(this.url, this.userData, headers).then(response => {\n          this.props.handleLogin(response.data.dados);\n          localStorage.setItem(\"token\", response.data.token);\n          localStorage.setItem(\"loggedIn\", \"LOGGED_IN\");\n          localStorage.setItem(\"idUsuario\", response.data.dados.idUsuario);\n          localStorage.setItem(\"name\", response.data.dados.nomeCompleto);\n          localStorage.setItem(\"email\", response.data.dados.email);\n          localStorage.setItem(\"telefone\", response.data.dados.telefone);\n          localStorage.setItem(\"localidade\", response.data.dados.localidade);\n          localStorage.setItem(\"descricao\", response.data.dados.descricao);\n          localStorage.setItem(\"categoria\", response.data.dados.categoria);\n          localStorage.setItem(\"imagemPerfil\", response.data.dados.imagemPerfil);\n          this.props.history.push('/');\n        }).catch(error => {\n          console.log(error);\n        });\n      }\n\n      this.render();\n    };\n\n    this.state = {\n      name: '',\n      email: '',\n      password: '',\n      phone: '',\n      confirm_password: '',\n      terms: false,\n      errNome: '',\n      errEmail: '',\n      errPassword: '',\n      errConfirmPassword: '',\n      errTerms: '',\n      errPhone: ''\n    };\n    this.url = '/registrar';\n    this.userData = {\n      nomeCompleto: '',\n      email: '',\n      senha: '',\n      telefone: ''\n    };\n  }\n\n  validate() {\n    let isCorrect = true;\n    let initial = this.state.email.substring(0, this.state.email.indexOf(\"@\"));\n    let domain = this.state.email.substring(this.state.email.indexOf(\"@\") + 1, this.state.email.length);\n\n    if (initial.length >= 1 && domain.length >= 3 && initial.search(\"@\") === -1 && domain.search(\"@\") === -1 && initial.search(\" \") === -1 && domain.search(\" \") === -1 && domain.search(\".\") !== -1 && domain.indexOf(\".\") >= 1 && domain.lastIndexOf(\".\") < domain.length - 1) {\n      // isCorrect = true;\n      this.setState({\n        errEmail: ''\n      });\n    } else {\n      isCorrect = false;\n      this.setState({\n        errEmail: \"Email inválido\"\n      });\n    }\n\n    if (this.state.name.length == 0) {\n      this.setState({\n        errNome: \"Digite um nome\"\n      });\n      isCorrect = false;\n    }\n\n    if (this.state.phone.replace(/\\D/gim, '').length < 10) {\n      isCorrect = false;\n      this.setState({\n        errPhone: \"Telefone Inválido\"\n      });\n    }\n\n    if (this.state.password.length < 6) {\n      isCorrect = false;\n      this.setState({\n        errPassword: \"Sua senha deve possuir no minimo 6 digitos!\"\n      });\n    }\n\n    if (this.state.password !== this.state.confirm_password) {\n      isCorrect = false;\n      this.setState({\n        errConfirmPassword: \"As senhas não correspodem\"\n      });\n    }\n\n    if (!this.state.terms) {\n      isCorrect = false;\n      this.setState({\n        errTerms: \"Você precisa concordar com os termos de uso!\"\n      });\n    }\n\n    if (isCorrect) {\n      this.userData.nomeCompleto = this.state.name;\n      this.userData.email = this.state.email;\n      this.userData.senha = this.state.password;\n      this.userData.telefone = this.state.phone.replace(/\\D/gim, '');\n    }\n\n    return isCorrect;\n  }\n\n  render() {\n    const {\n      name,\n      email,\n      password,\n      phone,\n      confirm_password,\n      terms,\n      errEmail,\n      errPassword,\n      errConfirmPassword,\n      errTerms,\n      errPhone,\n      errNome\n    } = this.state;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(GlobalStyle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Navbar, {\n      type: \"third\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"main\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 21\n      }\n    }, \"CADASTRE-SE\"), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 25\n      }\n    }, \"Cadastre-se para ter acesso a plataforma e encontrar os melhores profissionais para sua obra ou para divulgar o seu trabalho!\"), /*#__PURE__*/React.createElement(Space, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 25\n      }\n    }, \"Nome:\", /*#__PURE__*/React.createElement(Input, {\n      type: \"text\",\n      id: \"name\",\n      name: \"name\",\n      placeholder: \"Digite seu nome\",\n      value: name,\n      onChange: this.handleNameChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Alert, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 29\n      }\n    }, errNome)), /*#__PURE__*/React.createElement(Space, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 25\n      }\n    }, \"Email:\", /*#__PURE__*/React.createElement(Input, {\n      type: \"email\",\n      id: \"email\",\n      name: \"email\",\n      placeholder: \"Digite seu email\",\n      value: email,\n      onChange: this.handleEmailChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Alert, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 29\n      }\n    }, errEmail)), /*#__PURE__*/React.createElement(Space, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 25\n      }\n    }, \"Telefone:\", /*#__PURE__*/React.createElement(Input2Mask, {\n      type: \"text\",\n      id: \"phone\",\n      name: \"phone\",\n      alwaysShowMask: \"true\",\n      mask: \"(99) 99999-9999\",\n      value: phone,\n      onChange: this.handlePhoneChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Alert, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 29\n      }\n    }, errPhone)), /*#__PURE__*/React.createElement(Space, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 25\n      }\n    }, \"Senha:\", /*#__PURE__*/React.createElement(Input, {\n      type: \"password\",\n      id: \"password\",\n      name: \"password\",\n      placeholder: \"Digite sua senha\",\n      value: password,\n      onChange: this.handlePasswordChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Alert, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 29\n      }\n    }, errPassword)), /*#__PURE__*/React.createElement(Space, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 25\n      }\n    }, \"Confirme sua senha:\", /*#__PURE__*/React.createElement(Input, {\n      type: \"password\",\n      id: \"confirm_password\",\n      name: \"confirm_password\",\n      placeholder: \"Confirme sua senha\",\n      value: confirm_password,\n      onChange: this.handleConfirmPasswordChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Alert, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 29\n      }\n    }, errConfirmPassword)), /*#__PURE__*/React.createElement(Space, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      id: \"user-terms\",\n      type: \"checkbox\",\n      name: \"terms\",\n      onClick: this.handleTermsClicked,\n      value: terms,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 29\n      }\n    }), \"Li e aceito os \", /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/termosdeuso\",\n      target: \"_blank\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 44\n      }\n    }, \"termos de uso\"), /*#__PURE__*/React.createElement(Alert, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 29\n      }\n    }, errTerms)), /*#__PURE__*/React.createElement(Space, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 25\n      }\n    }, \"Enviar\"))), /*#__PURE__*/React.createElement(Footer, {\n      orange: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\n\nexport default Cadastro;","map":{"version":3,"sources":["/home/matheus/Documents/UNB/MDS/ObraCerta/front/src/pages/Cadastro/index.js"],"names":["React","Component","Button","Input","Footer","GlobalStyle","Space","Input2Mask","Alert","Navbar","api","Cadastro","constructor","props","handleTermsClicked","setState","terms","state","handleNameChange","event","name","target","value","handleEmailChange","email","handlePasswordChange","password","handlePhoneChange","phone","handleConfirmPasswordChange","confirm_password","handleSubmit","preventDefault","valid","validate","headers","post","url","userData","then","response","handleLogin","data","dados","localStorage","setItem","token","idUsuario","nomeCompleto","telefone","localidade","descricao","categoria","imagemPerfil","history","push","catch","error","console","log","render","errNome","errEmail","errPassword","errConfirmPassword","errTerms","errPhone","senha","isCorrect","initial","substring","indexOf","domain","length","search","lastIndexOf","replace"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Button from '../../components/Button';\nimport Input from '../../components/Input';\nimport Footer from '../../components/Footer';\nimport GlobalStyle from './styles';\nimport Space from '../../components/Space';\nimport Input2Mask from '../../components/InputMask';\nimport Alert from '../../components/Alert';\nimport Navbar from '../../components/Navbar';\nimport api from '../../services/api';\n\n/**\n* Representauma  página de cadastro, possui 3 atributos state,url e UserData.\n* state consiste no conjunto de estados da tela, desde os inputs do usuario até os erros possiveis\n* url é a rota que será usada para requisições ao back\n* UserData são os dados do novo usuário já validados, separados para o envio da requisição\n*/\nclass Cadastro extends Component {\n\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            name: '',\n            email: '',\n            password: '',\n            phone: '',\n            confirm_password: '',\n            terms: false,\n            errNome: '',\n            errEmail: '',\n            errPassword: '',\n            errConfirmPassword: '',\n            errTerms: '',\n            errPhone: ''\n\n        }\n\n        this.url = '/registrar'\n\n        this.userData = {\n            nomeCompleto: '',\n            email: '',\n            senha: '',\n            telefone: ''\n        }\n    }\n\n    validate() {\n        \n        let isCorrect = true;\n        let initial = this.state.email.substring(0, this.state.email.indexOf(\"@\"));\n        let domain = this.state.email.substring(this.state.email.indexOf(\"@\") + 1, this.state.email.length);\n        if ((initial.length >= 1) &&\n        (domain.length >= 3) &&\n        (initial.search(\"@\") === -1) &&\n        (domain.search(\"@\") === -1) &&\n        (initial.search(\" \") === -1) &&\n        (domain.search(\" \") === -1) &&\n        (domain.search(\".\") !== -1) &&\n        (domain.indexOf(\".\") >= 1) &&\n        (domain.lastIndexOf(\".\") < domain.length - 1)) {\n            // isCorrect = true;\n            this.setState({\n                errEmail: ''\n            })           \n        }\n        else {\n            isCorrect = false;\n            this.setState({\n                errEmail: \"Email inválido\"\n            })\n        }\n        if (this.state.name.length == 0) {\n            this.setState({errNome: \"Digite um nome\"});\n            isCorrect = false;\n        }\n        if (this.state.phone.replace(/\\D/gim, '').length < 10) {\n            isCorrect = false\n            this.setState({\n                errPhone: \"Telefone Inválido\"\n            })\n        }\n        if (this.state.password.length < 6) {\n            isCorrect = false\n            this.setState({\n                errPassword: \"Sua senha deve possuir no minimo 6 digitos!\"\n            })\n\n        }\n        if (this.state.password !== this.state.confirm_password) {\n            isCorrect = false\n            this.setState({\n                errConfirmPassword: \"As senhas não correspodem\"\n            })\n        }\n        if (!this.state.terms) {\n            isCorrect = false\n            this.setState({\n                errTerms: \"Você precisa concordar com os termos de uso!\"\n            })\n        }\n        if (isCorrect) {\n            this.userData.nomeCompleto = this.state.name;\n            this.userData.email = this.state.email;\n            this.userData.senha = this.state.password;\n            this.userData.telefone = this.state.phone.replace(/\\D/gim, '');\n\n        }\n        return isCorrect\n    }\n\n    handleTermsClicked = () => {\n        this.setState({\n            terms: !this.state.terms\n        })\n    }\n\n    handleNameChange = event => {\n        this.setState({\n            name: event.target.value\n        })\n    }\n\n    handleEmailChange = event => {\n        this.setState({\n            email: event.target.value\n        })\n    }\n\n    handlePasswordChange = event => {\n        this.setState({\n            password: event.target.value\n        })\n    }\n\n    handlePhoneChange = event => {\n        this.setState({\n            phone: event.target.value\n        })\n    }\n\n    handleConfirmPasswordChange = event => {\n        this.setState({\n            confirm_password: event.target.value\n        })\n    }\n\n    handleSubmit = event => {\n        event.preventDefault()\n        var valid = this.validate()\n        const headers = {\n            'content-type': 'application/json',\n        }\n\n        if (valid) {\n            api.post(this.url, this.userData, headers)\n                .then(response => {\n                    this.props.handleLogin(response.data.dados);\n                    localStorage.setItem(\"token\",response.data.token)\n                    localStorage.setItem(\"loggedIn\",\"LOGGED_IN\")\n                    localStorage.setItem(\"idUsuario\",response.data.dados.idUsuario);\n                    localStorage.setItem(\"name\",response.data.dados.nomeCompleto);\n                    localStorage.setItem(\"email\",response.data.dados.email);\n                    localStorage.setItem(\"telefone\",response.data.dados.telefone);\n                    localStorage.setItem(\"localidade\",response.data.dados.localidade);\n                    localStorage.setItem(\"descricao\",response.data.dados.descricao);\n                    localStorage.setItem(\"categoria\",response.data.dados.categoria);\n                    localStorage.setItem(\"imagemPerfil\",response.data.dados.imagemPerfil);\n                    this.props.history.push('/');\n                })\n                .catch(error => {\n                    console.log(error)\n                })\n\n        }\n        this.render()\n\n    }\n\n    render() {\n        const { name, email, password, phone, confirm_password, terms, errEmail, errPassword, errConfirmPassword, errTerms, errPhone, errNome } = this.state\n        return (\n            <>\n                <GlobalStyle />\n                <Navbar type='third'/>\n                <main>\n                    <h1>CADASTRE-SE</h1>\n                    <form onSubmit={this.handleSubmit}>\n                        <p>Cadastre-se para ter acesso a plataforma\n                        e encontrar os melhores profissionais para sua obra\n                        ou para divulgar o seu trabalho!</p>\n                        <Space />\n                        <label>Nome:\n                        <Input\n                                type=\"text\"\n                                id=\"name\"\n                                name=\"name\"\n                                placeholder=\"Digite seu nome\"\n                                value={name}\n                                onChange={this.handleNameChange}\n                            />\n                            <Alert>{errNome}</Alert>\n                        </label>\n                        <Space />\n                        <label>Email:\n                        <Input\n                                type=\"email\"\n                                id=\"email\"\n                                name=\"email\"\n                                placeholder=\"Digite seu email\"\n                                value={email}\n                                onChange={this.handleEmailChange}\n                            />\n                            <Alert>{errEmail}</Alert>\n                        </label>\n                        <Space />\n                        <label>Telefone:\n                        <Input2Mask\n                                type=\"text\"\n                                id=\"phone\"\n                                name=\"phone\"\n                                alwaysShowMask=\"true\"\n                                mask=\"(99) 99999-9999\"\n\n                                value={phone}\n                                onChange={this.handlePhoneChange}\n                            />\n                            <Alert>{errPhone}</Alert>\n                        </label>\n                        <Space />\n                        <label>Senha:\n                        <Input\n                                type=\"password\"\n                                id=\"password\"\n                                name=\"password\"\n                                placeholder=\"Digite sua senha\"\n                                value={password}\n                                onChange={this.handlePasswordChange}\n                            />\n                            <Alert>{errPassword}</Alert>\n                        </label>\n                        <Space />\n                        <label>Confirme sua senha:\n                        <Input\n                                type=\"password\"\n                                id=\"confirm_password\"\n                                name=\"confirm_password\"\n                                placeholder=\"Confirme sua senha\"\n                                value={confirm_password}\n                                onChange={this.handleConfirmPasswordChange}\n                            />\n                            <Alert>{errConfirmPassword}</Alert>\n                        </label>\n\n                        <Space />\n                        <label>\n                            <input id=\"user-terms\" type=\"checkbox\" name=\"terms\" onClick={this.handleTermsClicked} value={terms} />\n                            Li e aceito os <a href=\"/termosdeuso\" target=\"_blank\">termos de uso</a>\n                            <Alert>{errTerms}</Alert>\n                        </label>\n\n                        <Space />\n                        <Button>Enviar</Button>\n                    </form>\n                </main>\n                <Footer orange />\n            </>\n        )\n    }\n}\n\nexport default Cadastro\n"]},"metadata":{},"sourceType":"module"}