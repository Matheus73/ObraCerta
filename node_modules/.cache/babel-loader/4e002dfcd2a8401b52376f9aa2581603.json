{"ast":null,"code":"import * as React from 'react';\nimport { hideOthers } from 'aria-hidden';\nimport { InteractivityDisabler } from './InteractivityDisabler';\nimport { focusHiddenMarker } from './medium';\nimport { useEffect, useRef, useState } from 'react';\n\nvar extractRef = function (ref) {\n  return 'current' in ref ? ref.current : ref;\n};\n\nexport function Effect(_a) {\n  var setLockProps = _a.setLockProps,\n      onEscapeKey = _a.onEscapeKey,\n      onClickOutside = _a.onClickOutside,\n      shards = _a.shards,\n      onActivation = _a.onActivation,\n      onDeactivation = _a.onDeactivation,\n      noIsolation = _a.noIsolation;\n\n  var _b = useState(undefined),\n      activeNode = _b[0],\n      setActiveNode = _b[1];\n\n  var lastEventTarget = useRef(null);\n  var mouseTouches = useRef(0);\n  React.useEffect(function () {\n    var onKeyDown = function (event) {\n      if (!event.defaultPrevented) {\n        if ((event.code === 'Escape' || event.key === 'Escape' || event.keyCode === 27) && onEscapeKey) {\n          onEscapeKey(event);\n        }\n      }\n    };\n\n    var onMouseDown = function (event) {\n      if (event.defaultPrevented || event.target === lastEventTarget.current || event instanceof MouseEvent && event.button !== 0) {\n        return;\n      }\n\n      if (shards && shards.map(extractRef).some(function (node) {\n        return node && node.contains(event.target) || node === event.target;\n      })) {\n        return;\n      }\n\n      if (onClickOutside) {\n        onClickOutside(event);\n      }\n    };\n\n    var onTouchStart = function (event) {\n      onMouseDown(event);\n      mouseTouches.current = event.touches.length;\n    };\n\n    var onTouchEnd = function (event) {\n      mouseTouches.current = event.touches.length;\n    };\n\n    if (activeNode) {\n      document.addEventListener('keydown', onKeyDown);\n      document.addEventListener('mousedown', onMouseDown);\n      document.addEventListener('touchstart', onTouchStart);\n      document.addEventListener('touchend', onTouchEnd);\n      return function () {\n        document.removeEventListener('keydown', onKeyDown);\n        document.removeEventListener('mousedown', onMouseDown);\n        document.removeEventListener('touchstart', onTouchStart);\n        document.removeEventListener('touchend', onTouchEnd);\n      };\n    }\n  }, [activeNode, onClickOutside, onEscapeKey]);\n  useEffect(function () {\n    if (activeNode) {\n      if (onActivation) {\n        onActivation(activeNode);\n      }\n\n      return function () {\n        if (onDeactivation) {\n          onDeactivation();\n        }\n      };\n    }\n  }, [!!activeNode]);\n  useEffect(function () {\n    var _undo = function () {\n      return null;\n    };\n\n    var unmounted = false;\n\n    var onNodeActivation = function (node) {\n      _undo = hideOthers([node].concat((shards || []).map(extractRef)), document.body, noIsolation ? undefined : focusHiddenMarker);\n      setActiveNode(function () {\n        return node;\n      });\n    };\n\n    var onNodeDeactivation = function () {\n      _undo();\n\n      if (!unmounted) {\n        setActiveNode(null);\n      }\n    };\n\n    setLockProps({\n      onMouseDown: function (e) {\n        lastEventTarget.current = e.target;\n      },\n      onTouchStart: function (e) {\n        lastEventTarget.current = e.target;\n      },\n      onActivation: onNodeActivation,\n      onDeactivation: onNodeDeactivation\n    });\n    return function () {\n      unmounted = true;\n      setLockProps(false);\n    };\n  }, []);\n  return React.createElement(InteractivityDisabler, null);\n}","map":{"version":3,"sources":["/home/matheus/Documents/UNB/MDS/ObraCerta/front/node_modules/react-focus-on/dist/es2015/Effect.js"],"names":["React","hideOthers","InteractivityDisabler","focusHiddenMarker","useEffect","useRef","useState","extractRef","ref","current","Effect","_a","setLockProps","onEscapeKey","onClickOutside","shards","onActivation","onDeactivation","noIsolation","_b","undefined","activeNode","setActiveNode","lastEventTarget","mouseTouches","onKeyDown","event","defaultPrevented","code","key","keyCode","onMouseDown","target","MouseEvent","button","map","some","node","contains","onTouchStart","touches","length","onTouchEnd","document","addEventListener","removeEventListener","_undo","unmounted","onNodeActivation","concat","body","onNodeDeactivation","e","createElement"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { hideOthers } from 'aria-hidden';\nimport { InteractivityDisabler } from './InteractivityDisabler';\nimport { focusHiddenMarker } from './medium';\nimport { useEffect, useRef, useState } from 'react';\nvar extractRef = function (ref) {\n    return 'current' in ref ? ref.current : ref;\n};\nexport function Effect(_a) {\n    var setLockProps = _a.setLockProps, onEscapeKey = _a.onEscapeKey, onClickOutside = _a.onClickOutside, shards = _a.shards, onActivation = _a.onActivation, onDeactivation = _a.onDeactivation, noIsolation = _a.noIsolation;\n    var _b = useState(undefined), activeNode = _b[0], setActiveNode = _b[1];\n    var lastEventTarget = useRef(null);\n    var mouseTouches = useRef(0);\n    React.useEffect(function () {\n        var onKeyDown = function (event) {\n            if (!event.defaultPrevented) {\n                if ((event.code === 'Escape' ||\n                    event.key === 'Escape' ||\n                    event.keyCode === 27) &&\n                    onEscapeKey) {\n                    onEscapeKey(event);\n                }\n            }\n        };\n        var onMouseDown = function (event) {\n            if (event.defaultPrevented ||\n                event.target === lastEventTarget.current ||\n                (event instanceof MouseEvent && event.button !== 0)) {\n                return;\n            }\n            if (shards &&\n                shards\n                    .map(extractRef)\n                    .some(function (node) {\n                    return (node && node.contains(event.target)) ||\n                        node === event.target;\n                })) {\n                return;\n            }\n            if (onClickOutside) {\n                onClickOutside(event);\n            }\n        };\n        var onTouchStart = function (event) {\n            onMouseDown(event);\n            mouseTouches.current = event.touches.length;\n        };\n        var onTouchEnd = function (event) {\n            mouseTouches.current = event.touches.length;\n        };\n        if (activeNode) {\n            document.addEventListener('keydown', onKeyDown);\n            document.addEventListener('mousedown', onMouseDown);\n            document.addEventListener('touchstart', onTouchStart);\n            document.addEventListener('touchend', onTouchEnd);\n            return function () {\n                document.removeEventListener('keydown', onKeyDown);\n                document.removeEventListener('mousedown', onMouseDown);\n                document.removeEventListener('touchstart', onTouchStart);\n                document.removeEventListener('touchend', onTouchEnd);\n            };\n        }\n    }, [activeNode, onClickOutside, onEscapeKey]);\n    useEffect(function () {\n        if (activeNode) {\n            if (onActivation) {\n                onActivation(activeNode);\n            }\n            return function () {\n                if (onDeactivation) {\n                    onDeactivation();\n                }\n            };\n        }\n    }, [!!activeNode]);\n    useEffect(function () {\n        var _undo = function () { return null; };\n        var unmounted = false;\n        var onNodeActivation = function (node) {\n            _undo = hideOthers([node].concat((shards || []).map(extractRef)), document.body, noIsolation ? undefined : focusHiddenMarker);\n            setActiveNode(function () { return node; });\n        };\n        var onNodeDeactivation = function () {\n            _undo();\n            if (!unmounted) {\n                setActiveNode(null);\n            }\n        };\n        setLockProps({\n            onMouseDown: function (e) {\n                lastEventTarget.current = e.target;\n            },\n            onTouchStart: function (e) {\n                lastEventTarget.current = e.target;\n            },\n            onActivation: onNodeActivation,\n            onDeactivation: onNodeDeactivation\n        });\n        return function () {\n            unmounted = true;\n            setLockProps(false);\n        };\n    }, []);\n    return React.createElement(InteractivityDisabler, null);\n}\n"]},"metadata":{},"sourceType":"module"}