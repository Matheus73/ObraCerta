{"ast":null,"code":"import React, { cloneElement, Component, Children } from 'react';\nimport { findDOMNode, createPortal } from 'react-dom';\nimport glam from 'glam';\nimport rafScheduler from 'raf-schd';\nimport { ViewPager, Frame, Track, View as View$1 } from 'react-view-pager';\nimport ParseHtml from 'html-react-parser';\nimport { FocusOn } from 'react-focus-on';\nimport Fullscreen from 'react-full-screen';\nimport focusStore from 'a11y-focus-store';\nimport { Transition, TransitionGroup } from 'react-transition-group';\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar defineProperty = function (obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar objectWithoutProperties = function (obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n};\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nvar Base = function Base(_ref) {\n  var css = _ref.css,\n      innerRef = _ref.innerRef,\n      Tag = _ref.tag,\n      props = objectWithoutProperties(_ref, ['css', 'innerRef', 'tag']);\n  return glam(Tag, _extends({\n    ref: innerRef,\n    css: _extends({\n      boxSizing: 'border-box'\n    }, css)\n  }, props));\n};\n\nvar Button = function Button(props) {\n  return glam(Base, _extends({\n    tag: 'button'\n  }, props));\n};\n\nvar Div = function Div(props) {\n  return glam(Base, _extends({\n    tag: 'div'\n  }, props));\n};\n\nvar Img = function Img(props) {\n  return glam(Base, _extends({\n    tag: 'img'\n  }, props));\n};\n\nvar Nav = function Nav(props) {\n  return glam(Base, _extends({\n    tag: 'nav'\n  }, props));\n};\n\nvar Span = function Span(props) {\n  return glam(Base, _extends({\n    tag: 'span'\n  }, props));\n}; // ==============================\n// Class Name Prefixer\n// ==============================\n\n\nvar CLASS_PREFIX = 'react-images';\n/**\r\n String representation of component state for styling with class names.\r\n\r\n Expects an array of strings OR a string/object pair:\r\n - className(['comp', 'comp-arg', 'comp-arg-2'])\r\n   @returns 'react-images__comp react-images__comp-arg react-images__comp-arg-2'\r\n - className('comp', { some: true, state: false })\r\n   @returns 'react-images__comp react-images__comp--some'\r\n*/\n\nfunction className(name, state) {\n  var arr = Array.isArray(name) ? name : [name]; // loop through state object, remove falsey values and combine with name\n\n  if (state && typeof name === 'string') {\n    for (var _key in state) {\n      if (state.hasOwnProperty(_key) && state[_key]) {\n        arr.push(name + '--' + _key);\n      }\n    }\n  } // prefix everything and return a string\n\n\n  return arr.map(function (cn) {\n    return CLASS_PREFIX + '__' + cn;\n  }).join(' ');\n} // ==============================\n// Touch Capability Detector\n// ==============================\n\n\nfunction isTouch() {\n  try {\n    document.createEvent('TouchEvent');\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar containerCSS = function containerCSS(_ref) {\n  var isFullscreen = _ref.isFullscreen;\n  return {\n    backgroundColor: isFullscreen ? 'black' : null,\n    display: 'flex ',\n    flexDirection: 'column',\n    height: '100%'\n  };\n};\n\nvar Container = function Container(props) {\n  var children = props.children,\n      getStyles = props.getStyles,\n      isFullscreen = props.isFullscreen,\n      isModal = props.isModal,\n      innerProps = props.innerProps;\n  return glam(Div, _extends({\n    css: getStyles('container', props),\n    className: className('container', {\n      isFullscreen: isFullscreen,\n      isModal: isModal\n    })\n  }, innerProps), children);\n};\n\nvar smallDevice = '@media (max-width: 769px)';\n/**\r\n * Used to get the HTML class to select specific components.\r\n * We call `className()` in utils with each of these to get the full className,\r\n * with prefixes.\r\n */\n\nvar componentBaseClassNames = {\n  Header: 'header',\n  Footer: 'footer',\n  View: 'view',\n  Track: 'track',\n  Positioner: 'positioner'\n};\n\nvar footerCSS = function footerCSS(_ref) {\n  var isModal = _ref.isModal,\n      interactionIsIdle = _ref.interactionIsIdle;\n  return defineProperty({\n    alignItems: 'top',\n    bottom: isModal ? 0 : null,\n    color: isModal ? 'rgba(255, 255, 255, 0.9)' : '#666',\n    display: 'flex ',\n    flex: '0 0 auto',\n    fontSize: 13,\n    justifyContent: 'space-between',\n    left: isModal ? 0 : null,\n    opacity: interactionIsIdle && isModal ? 0 : 1,\n    padding: isModal ? '30px 20px 20px' : '10px 0',\n    position: isModal ? 'absolute' : null,\n    right: isModal ? 0 : null,\n    transform: isModal ? 'translateY(' + (interactionIsIdle ? 10 : 0) + 'px)' : null,\n    transition: 'opacity 300ms, transform 300ms',\n    zIndex: isModal ? 1 : null,\n    '& *:focus': {\n      outline: '1.5px solid orange'\n    }\n  }, smallDevice, {\n    padding: isModal ? '20px 15px 15px' : '5px 0'\n  });\n};\n\nvar footerBaseClassName = componentBaseClassNames.Footer;\n\nvar Footer = function Footer(props) {\n  var components = props.components,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps,\n      isFullscreen = props.isFullscreen,\n      isModal = props.isModal;\n  var style = isModal ? {\n    background: 'linear-gradient(rgba(0,0,0,0), rgba(0,0,0,0.33))'\n  } : null;\n  var state = {\n    isFullscreen: isFullscreen,\n    isModal: isModal\n  };\n  var cn = {\n    container: className(footerBaseClassName, state),\n    caption: className('footer__caption', state),\n    count: className('footer__count', state)\n  };\n  var css = {\n    container: getStyles(footerBaseClassName, props),\n    caption: getStyles('footerCaption', props),\n    count: getStyles('footerCount', props)\n  };\n  var Caption = components.Caption,\n      Count = components.Count;\n  return glam(Div, _extends({\n    css: css.container,\n    className: cn.container // TODO glam prefixer fails on gradients\n    // https://github.com/threepointone/glam/issues/35\n    ,\n    style: style\n  }, innerProps), glam(Caption, props), glam(Count, props));\n}; // ==============================\n// Inner Elements\n// ==============================\n\n\nvar footerCaptionCSS = function footerCaptionCSS() {\n  return {};\n};\n\nvar FooterCaption = function FooterCaption(props) {\n  var currentView = props.currentView,\n      getStyles = props.getStyles,\n      isFullscreen = props.isFullscreen,\n      isModal = props.isModal;\n  var caption = currentView.caption;\n  var state = {\n    isFullscreen: isFullscreen,\n    isModal: isModal\n  };\n  return glam(Span, {\n    css: getStyles('footerCaption', props),\n    className: className('footer__caption', state)\n  }, typeof caption === 'string' ? ParseHtml('<span>' + caption + '</span>') : caption);\n};\n\nvar footerCountCSS = function footerCountCSS() {\n  return {\n    flexShrink: 0,\n    marginLeft: '1em'\n  };\n};\n\nvar FooterCount = function FooterCount(props) {\n  var currentIndex = props.currentIndex,\n      getStyles = props.getStyles,\n      isFullscreen = props.isFullscreen,\n      isModal = props.isModal,\n      views = props.views;\n  var state = {\n    isFullscreen: isFullscreen,\n    isModal: isModal\n  };\n  var activeView = currentIndex + 1;\n  var totalViews = views.length;\n  if (!activeView || !totalViews) return null;\n  return glam(Span, {\n    css: getStyles('footerCount', props),\n    className: className('footer__count', state)\n  }, activeView, ' of ', totalViews);\n};\n\nvar Svg = function Svg(_ref) {\n  var size = _ref.size,\n      props = objectWithoutProperties(_ref, ['size']);\n  return glam('svg', _extends({\n    role: 'presentation',\n    viewBox: '0 0 24 24',\n    css: {\n      display: 'inline-block',\n      fill: 'currentColor',\n      height: size,\n      stroke: 'currentColor',\n      strokeWidth: 0,\n      width: size\n    }\n  }, props));\n};\n\nvar ChevronLeft = function ChevronLeft(_ref2) {\n  var _ref2$size = _ref2.size,\n      size = _ref2$size === undefined ? 32 : _ref2$size,\n      props = objectWithoutProperties(_ref2, ['size']);\n  return glam(Svg, _extends({\n    size: size\n  }, props), glam('path', {\n    d: 'M15.422 16.078l-1.406 1.406-6-6 6-6 1.406 1.406-4.594 4.594z'\n  }));\n};\n\nvar ChevronRight = function ChevronRight(_ref3) {\n  var _ref3$size = _ref3.size,\n      size = _ref3$size === undefined ? 32 : _ref3$size,\n      props = objectWithoutProperties(_ref3, ['size']);\n  return glam(Svg, _extends({\n    size: size\n  }, props), glam('path', {\n    d: 'M9.984 6l6 6-6 6-1.406-1.406 4.594-4.594-4.594-4.594z'\n  }));\n};\n\nvar Close = function Close(_ref4) {\n  var _ref4$size = _ref4.size,\n      size = _ref4$size === undefined ? 32 : _ref4$size,\n      props = objectWithoutProperties(_ref4, ['size']);\n  return glam(Svg, _extends({\n    size: size\n  }, props), glam('path', {\n    d: 'M18.984 6.422l-5.578 5.578 5.578 5.578-1.406 1.406-5.578-5.578-5.578 5.578-1.406-1.406 5.578-5.578-5.578-5.578 1.406-1.406 5.578 5.578 5.578-5.578z'\n  }));\n};\n\nvar FullscreenEnter = function FullscreenEnter(_ref5) {\n  var _ref5$size = _ref5.size,\n      size = _ref5$size === undefined ? 32 : _ref5$size,\n      props = objectWithoutProperties(_ref5, ['size']);\n  return glam(Svg, _extends({\n    size: size\n  }, props), glam('path', {\n    d: 'M14.016 5.016h4.969v4.969h-1.969v-3h-3v-1.969zM17.016 17.016v-3h1.969v4.969h-4.969v-1.969h3zM5.016 9.984v-4.969h4.969v1.969h-3v3h-1.969zM6.984 14.016v3h3v1.969h-4.969v-4.969h1.969z'\n  }));\n};\n\nvar FullscreenExit = function FullscreenExit(_ref6) {\n  var _ref6$size = _ref6.size,\n      size = _ref6$size === undefined ? 32 : _ref6$size,\n      props = objectWithoutProperties(_ref6, ['size']);\n  return glam(Svg, _extends({\n    size: size\n  }, props), glam('path', {\n    d: 'M15.984 8.016h3v1.969h-4.969v-4.969h1.969v3zM14.016 18.984v-4.969h4.969v1.969h-3v3h-1.969zM8.016 8.016v-3h1.969v4.969h-4.969v-1.969h3zM5.016 15.984v-1.969h4.969v4.969h-1.969v-3h-3z'\n  }));\n};\n\nvar headerCSS = function headerCSS(_ref) {\n  var interactionIsIdle = _ref.interactionIsIdle;\n  return {\n    alignItems: 'center',\n    display: 'flex ',\n    flex: '0 0 auto',\n    justifyContent: 'space-between',\n    opacity: interactionIsIdle ? 0 : 1,\n    padding: 10,\n    paddingBottom: 20,\n    position: 'absolute',\n    transform: 'translateY(' + (interactionIsIdle ? -10 : 0) + 'px)',\n    transition: 'opacity 300ms, transform 300ms',\n    top: 0,\n    left: 0,\n    right: 0,\n    zIndex: 1,\n    '& *:focus': {\n      outline: '1.5px solid orange'\n    }\n  };\n};\n\nvar headerBaseClassName = componentBaseClassNames.Header;\n\nvar Header = function Header(props) {\n  var components = props.components,\n      getStyles = props.getStyles,\n      getCloseLabel = props.getCloseLabel,\n      getFullscreenLabel = props.getFullscreenLabel,\n      innerProps = props.innerProps,\n      isModal = props.isModal,\n      modalProps = props.modalProps;\n  if (!isModal) return null;\n  var allowFullscreen = modalProps.allowFullscreen,\n      isFullscreen = modalProps.isFullscreen,\n      onClose = modalProps.onClose,\n      toggleFullscreen = modalProps.toggleFullscreen;\n  var FsIcon = isFullscreen ? FullscreenExit : FullscreenEnter;\n  var CloseButton = components.CloseButton,\n      FullscreenButton = components.FullscreenButton;\n  var state = {\n    isFullscreen: isFullscreen,\n    isModal: isModal\n  };\n  return glam(Div, _extends({\n    css: getStyles(headerBaseClassName, props),\n    className: className(headerBaseClassName, state) // TODO glam prefixer fails on gradients\n    // https://github.com/threepointone/glam/issues/35\n    ,\n    style: {\n      background: 'linear-gradient(rgba(0,0,0,0.33), rgba(0,0,0,0))'\n    }\n  }, innerProps), glam('span', null), glam('span', null, allowFullscreen ? glam(FullscreenButton, {\n    getStyles: getStyles,\n    innerProps: {\n      onClick: toggleFullscreen,\n      title: getFullscreenLabel(state)\n    }\n  }, glam(FsIcon, {\n    size: 32\n  })) : null, glam(CloseButton, {\n    getStyles: getStyles,\n    innerProps: {\n      onClick: onClose,\n      title: getCloseLabel(state)\n    }\n  }, glam(Close, {\n    size: 32\n  }))));\n}; // ==============================\n// Header Buttons\n// ==============================\n\n\nvar headerButtonCSS = function headerButtonCSS() {\n  return {\n    alignItems: 'center',\n    background: 0,\n    border: 0,\n    color: 'rgba(255, 255, 255, 0.75)',\n    cursor: 'pointer',\n    display: 'inline-flex ',\n    height: 44,\n    justifyContent: 'center',\n    outline: 0,\n    padding: 0,\n    position: 'relative',\n    width: 44,\n    '&:hover': {\n      color: 'white'\n    }\n  };\n};\n\nvar headerFullscreenCSS = headerButtonCSS;\n\nvar HeaderFullscreen = function HeaderFullscreen(props) {\n  var children = props.children,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps;\n  return glam(Button, _extends({\n    css: getStyles('headerFullscreen', props),\n    className: className(['header_button', 'header_button--fullscreen']),\n    type: 'button'\n  }, innerProps), children);\n};\n\nvar headerCloseCSS = headerButtonCSS;\n\nvar HeaderClose = function HeaderClose(props) {\n  var children = props.children,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps;\n  return glam(Button, _extends({\n    css: getStyles('headerClose', props),\n    className: className(['header_button', 'header_button--close']),\n    type: 'button'\n  }, innerProps), children);\n}; // ==============================\n// Navigation\n// ==============================\n\n\nvar navigationCSS = function navigationCSS(_ref) {\n  var interactionIsIdle = _ref.interactionIsIdle;\n  return {\n    display: 'flex ',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    opacity: interactionIsIdle ? 0 : 1,\n    transition: 'opacity 300ms',\n    '& *:focus': {\n      outline: '1.5px solid orange'\n    }\n  };\n};\n\nvar Navigation = function Navigation(props) {\n  var children = props.children,\n      getStyles = props.getStyles,\n      isFullscreen = props.isFullscreen,\n      isModal = props.isModal,\n      showNavigationOnTouchDevice = props.showNavigationOnTouchDevice;\n  return !isTouch() || isTouch() && showNavigationOnTouchDevice ? glam(Nav, {\n    css: getStyles('navigation', props),\n    className: className('navigation', {\n      isFullscreen: isFullscreen,\n      isModal: isModal\n    })\n  }, children) : null;\n}; // ==============================\n// Nav Item\n// ==============================\n\n\nvar BUTTON_SIZE = 50;\n\nvar navigationItemCSS = function navigationItemCSS(_ref2) {\n  var _ref3;\n\n  var align = _ref2.align;\n  return _ref3 = {\n    alignItems: 'center',\n    background: 'rgba(255, 255, 255, 0.2)',\n    border: 0,\n    borderRadius: '50%',\n    color: 'white',\n    cursor: 'pointer',\n    display: 'flex ',\n    fontSize: 'inherit',\n    height: BUTTON_SIZE,\n    justifyContent: 'center',\n    marginTop: -(BUTTON_SIZE / 2),\n    outline: 0,\n    position: 'absolute',\n    top: '50%',\n    transition: 'background-color 200ms',\n    width: BUTTON_SIZE\n  }, defineProperty(_ref3, align, 20), defineProperty(_ref3, '&:hover', {\n    background: 'rgba(255, 255, 255, 0.3)'\n  }), defineProperty(_ref3, '&:active', {\n    background: 'rgba(255, 255, 255, 0.2)'\n  }), _ref3;\n};\n\nvar navigationPrevCSS = navigationItemCSS;\n\nvar NavigationPrev = function NavigationPrev(props) {\n  var _props$children = props.children,\n      children = _props$children === undefined ? glam(ChevronLeft, {\n    size: 48\n  }) : _props$children,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps;\n  return glam(Button, _extends({\n    type: 'button',\n    css: getStyles('navigationPrev', props)\n  }, innerProps), children);\n};\n\nvar navigationNextCSS = navigationItemCSS;\n\nvar NavigationNext = function NavigationNext(props) {\n  var _props$children2 = props.children,\n      children = _props$children2 === undefined ? glam(ChevronRight, {\n    size: 48\n  }) : _props$children2,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps;\n  return glam(Button, _extends({\n    type: 'button',\n    css: getStyles('navigationNext', props)\n  }, innerProps), children);\n}; // ==============================\n// Blanket\n// ==============================\n\n\nvar blanketCSS = function blanketCSS(_ref) {\n  var isFullscreen = _ref.isFullscreen;\n  return {\n    backgroundColor: isFullscreen ? 'black' : 'rgba(0, 0, 0, 0.8)',\n    bottom: 0,\n    left: 0,\n    position: 'fixed',\n    right: 0,\n    top: 0,\n    zIndex: 1199\n  };\n};\n\nvar Blanket = function Blanket(props) {\n  var getStyles = props.getStyles,\n      innerProps = props.innerProps,\n      isFullscreen = props.isFullscreen;\n  return glam(Div, _extends({\n    css: getStyles('blanket', props),\n    className: className('blanket', {\n      isFullscreen: isFullscreen\n    })\n  }, innerProps));\n}; // ==============================\n// Positioner\n// ==============================\n\n\nvar positionerCSS = function positionerCSS() {\n  return {\n    alignItems: 'center',\n    bottom: 0,\n    display: 'flex ',\n    justifyContent: 'center',\n    left: 0,\n    position: 'fixed',\n    right: 0,\n    top: 0,\n    zIndex: 1200\n  };\n};\n\nvar Positioner = function Positioner(props) {\n  var children = props.children,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps,\n      isFullscreen = props.isFullscreen;\n  return glam(Div, _extends({\n    css: getStyles(componentBaseClassNames.Positioner, props),\n    className: className(componentBaseClassNames.Positioner, {\n      isFullscreen: isFullscreen\n    })\n  }, innerProps), children);\n}; // ==============================\n// Dialog\n// ==============================\n\n\nvar dialogCSS = function dialogCSS() {\n  return {\n    width: '100%'\n  };\n};\n\nvar Dialog = function Dialog(props) {\n  var children = props.children,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps,\n      isFullscreen = props.isFullscreen,\n      removeFocusOn = props.removeFocusOn;\n  return removeFocusOn ? glam(Div, _extends({\n    css: getStyles('dialog', props),\n    className: className('dialog', {\n      isFullscreen: isFullscreen\n    })\n  }, innerProps), children) : glam(FocusOn, null, glam(Div, _extends({\n    css: getStyles('dialog', props),\n    className: className('dialog', {\n      isFullscreen: isFullscreen\n    })\n  }, innerProps), children));\n};\n\nfunction getSource(_ref) {\n  var data = _ref.data,\n      isFullscreen = _ref.isFullscreen;\n  var _data$source = data.source,\n      source = _data$source === undefined ? data.src : _data$source;\n  if (typeof source === 'string') return source;\n  return isFullscreen ? source.fullscreen : source.regular;\n}\n\nvar viewCSS = function viewCSS() {\n  return {\n    lineHeight: 0,\n    position: 'relative',\n    textAlign: 'center'\n  };\n};\n\nvar viewBaseClassName = componentBaseClassNames.View;\n\nvar View = function View(props) {\n  var data = props.data,\n      formatters = props.formatters,\n      getStyles = props.getStyles,\n      index = props.index,\n      isFullscreen = props.isFullscreen,\n      isModal = props.isModal;\n  var innerProps = {\n    alt: formatters.getAltText({\n      data: data,\n      index: index\n    }),\n    src: getSource({\n      data: data,\n      isFullscreen: isFullscreen\n    })\n  };\n  return glam(Div, {\n    css: getStyles(viewBaseClassName, props),\n    className: className(viewBaseClassName, {\n      isFullscreen: isFullscreen,\n      isModal: isModal\n    })\n  }, glam(Img, _extends({}, innerProps, {\n    className: className('view-image', {\n      isFullscreen: isFullscreen,\n      isModal: isModal\n    }),\n    css: {\n      height: 'auto',\n      maxHeight: '100%',\n      maxWidth: '100%',\n      userSelect: 'none',\n      margin: 'auto'\n    }\n  })));\n};\n\nvar carouselComponents = {\n  Container: Container,\n  Footer: Footer,\n  FooterCaption: FooterCaption,\n  FooterCount: FooterCount,\n  Header: Header,\n  HeaderClose: HeaderClose,\n  HeaderFullscreen: HeaderFullscreen,\n  Navigation: Navigation,\n  NavigationPrev: NavigationPrev,\n  NavigationNext: NavigationNext,\n  View: View\n};\n\nvar defaultCarouselComponents = function defaultCarouselComponents(providedComponents) {\n  return _extends({}, carouselComponents, providedComponents);\n}; // ==============================\n// Modal\n// ==============================\n\n\nvar modalComponents = {\n  Blanket: Blanket,\n  Positioner: Positioner,\n  Dialog: Dialog\n};\n\nvar defaultModalComponents = function defaultModalComponents(providedComponents) {\n  return _extends({}, modalComponents, providedComponents);\n};\n\nvar defaultCarouselStyles = {\n  container: containerCSS,\n  footer: footerCSS,\n  footerCaption: footerCaptionCSS,\n  footerCount: footerCountCSS,\n  header: headerCSS,\n  headerClose: headerCloseCSS,\n  headerFullscreen: headerFullscreenCSS,\n  navigation: navigationCSS,\n  navigationPrev: navigationPrevCSS,\n  navigationNext: navigationNextCSS,\n  view: viewCSS\n};\nvar defaultModalStyles = {\n  blanket: blanketCSS,\n  dialog: dialogCSS,\n  positioner: positionerCSS\n};\nvar easing = 'cubic-bezier(0.23, 1, 0.32, 1)'; // easeOutQuint\n\nvar verticalOffset = 40; // ==============================\n// Fade\n// ==============================\n\nvar Fade = function Fade(_ref) {\n  var Tag = _ref.component,\n      onEntered = _ref.onEntered,\n      onExited = _ref.onExited,\n      inProp = _ref.in,\n      originalProps = _ref.innerProps,\n      props = objectWithoutProperties(_ref, ['component', 'onEntered', 'onExited', 'in', 'innerProps']);\n  var enter = 300;\n  var exit = 500;\n  var fadeStyle = {\n    transition: 'opacity 200ms',\n    opacity: 0\n  };\n  var fadeTransition = {\n    entering: {\n      opacity: 0\n    },\n    entered: {\n      opacity: 1\n    },\n    exiting: {\n      opacity: 0,\n      transitionDuration: exit + 'ms'\n    }\n  };\n  return React.createElement(Transition, {\n    appear: true,\n    mountOnEnter: true,\n    unmountOnExit: true,\n    onEntered: onEntered,\n    onExited: onExited,\n    key: 'fade',\n    'in': inProp,\n    timeout: {\n      enter: enter,\n      exit: exit\n    }\n  }, function (status) {\n    var innerProps = _extends({}, originalProps, {\n      style: _extends({}, fadeStyle, fadeTransition[status])\n    });\n\n    if (status === 'exited') return null;\n    return React.createElement(Tag, _extends({\n      innerProps: innerProps\n    }, props));\n  });\n};\n\nvar SlideUp = function SlideUp(_ref2) {\n  var Tag = _ref2.component,\n      onEntered = _ref2.onEntered,\n      onExited = _ref2.onExited,\n      inProp = _ref2.in,\n      originalProps = _ref2.innerProps,\n      props = objectWithoutProperties(_ref2, ['component', 'onEntered', 'onExited', 'in', 'innerProps']);\n  var enter = 300;\n  var exit = 500;\n  var restingTransform = 'translate3d(0, 0, 0)';\n  var slideStyle = {\n    transition: 'transform ' + enter + 'ms ' + easing + ', opacity ' + enter + 'ms ' + easing,\n    transform: restingTransform\n  };\n  var slideTransition = {\n    entering: {\n      opacity: 0,\n      transform: 'translate3d(0, ' + verticalOffset + 'px, 0) scale(0.9)'\n    },\n    entered: {\n      opacity: 1,\n      transform: restingTransform\n    },\n    exiting: {\n      opacity: 0,\n      transform: 'translate3d(0, ' + verticalOffset + 'px, 0) scale(0.9)',\n      transition: 'transform ' + exit + 'ms ' + easing + ', opacity ' + exit + 'ms ' + easing\n    }\n  };\n  return React.createElement(Transition, {\n    appear: true,\n    'in': inProp,\n    mountOnEnter: true,\n    onEntered: onEntered,\n    onExited: onExited,\n    timeout: {\n      enter: enter,\n      exit: exit\n    },\n    unmountOnExit: true\n  }, function (status) {\n    if (status === 'exited') return null;\n\n    var innerProps = _extends({}, originalProps, {\n      style: _extends({}, slideStyle, slideTransition[status])\n    });\n\n    return React.createElement(Tag, _extends({\n      innerProps: innerProps\n    }, props));\n  });\n};\n\nvar defaultProps = {\n  allowFullscreen: !isTouch(),\n  closeOnBackdropClick: true,\n  closeOnEsc: true,\n  preventScroll: true,\n  styles: {}\n};\n/** Classes that when clicked on, close the backdrop */\n\nvar backdropClassNames = new Set([componentBaseClassNames.View, componentBaseClassNames.Header, componentBaseClassNames.Footer, componentBaseClassNames.Track, componentBaseClassNames.Positioner].map(className));\n\nvar Modal = function (_Component) {\n  inherits(Modal, _Component); // TODO\n\n  function Modal(props) {\n    classCallCheck(this, Modal);\n\n    var _this = possibleConstructorReturn(this, (Modal.__proto__ || Object.getPrototypeOf(Modal)).call(this, props));\n\n    _initialiseProps.call(_this);\n\n    _this.cacheComponents(props.components);\n\n    _this.state = {\n      isFullscreen: false,\n      isClosing: false\n    };\n    return _this;\n  }\n\n  createClass(Modal, [{\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.components !== this.props.components) {\n        this.cacheComponents(prevProps.components);\n      }\n    } // emulate `componentDidMount` & `componentWillUnmount`\n    // called on complete of enter & exit transitions respectively\n\n  }, {\n    key: 'getCommonProps',\n    value: function getCommonProps() {\n      var isFullscreen = this.state.isFullscreen;\n      return {\n        getStyles: this.getStyles,\n        isFullscreen: isFullscreen,\n        modalProps: this.props\n      };\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _components = this.components,\n          Blanket = _components.Blanket,\n          Positioner = _components.Positioner,\n          Dialog = _components.Dialog;\n      var _props = this.props,\n          allowFullscreen = _props.allowFullscreen,\n          children = _props.children;\n      var isFullscreen = this.state.isFullscreen;\n      var commonProps = this.commonProps = this.getCommonProps(); // $FlowFixMe\n\n      var transitionIn = this.props.in; // forward props to modal for use in internal components\n\n      var modalProps = {\n        allowFullscreen: allowFullscreen,\n        isFullscreen: isFullscreen,\n        onClose: this.handleClose,\n        preventScroll: this.preventScroll,\n        toggleFullscreen: this.toggleFullscreen\n      }; // augment user carousel with modal props\n      // $FlowFixMe\n\n      var carouselComponent = cloneElement(children, {\n        isModal: true,\n        modalProps: modalProps\n      });\n      return glam(Fullscreen, {\n        enabled: isFullscreen,\n        onChange: this.handleFullscreenChange\n      }, glam(Fade, _extends({}, commonProps, {\n        component: Blanket,\n        'in': transitionIn\n      })), glam(SlideUp, _extends({}, commonProps, {\n        component: Positioner,\n        'in': transitionIn,\n        innerProps: {\n          onClick: this.state.isClosing ? null : this.handleBackdropClick\n        },\n        onEntered: this.modalDidMount,\n        onExited: this.modalWillUnmount\n      }), glam(Dialog, _extends({\n        removeFocusOn: this.state.isClosing\n      }, commonProps), carouselComponent)));\n    }\n  }]);\n  return Modal;\n}(Component);\n\nModal.defaultProps = defaultProps;\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this2 = this;\n\n  this.modalDidMount = function () {\n    document.addEventListener('keyup', _this2.handleKeyUp);\n    focusStore.storeFocus();\n  };\n\n  this.modalWillUnmount = function () {\n    document.removeEventListener('keyup', _this2.handleKeyUp);\n    focusStore.restoreFocus();\n\n    _this2.setState({\n      isClosing: false\n    });\n  };\n\n  this.cacheComponents = function (comps) {\n    _this2.components = defaultModalComponents(comps);\n  };\n\n  this.handleFullscreenChange = function (isFullscreen) {\n    _this2.setState({\n      isFullscreen: isFullscreen\n    });\n  };\n\n  this.handleKeyUp = function (event) {\n    var _props2 = _this2.props,\n        allowFullscreen = _props2.allowFullscreen,\n        closeOnEsc = _props2.closeOnEsc;\n    var isFullscreen = _this2.state.isFullscreen;\n    var allowClose = event.key === 'Escape' && closeOnEsc && !isFullscreen; // toggle fullscreen\n\n    if (allowFullscreen && event.key === 'f') {\n      _this2.toggleFullscreen();\n    } // close on escape when not fullscreen\n\n\n    if (allowClose) _this2.handleClose(event);\n  };\n\n  this.handleBackdropClick = function (event) {\n    var hasBackdropClassName = false;\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = event.target.classList[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var targetClass = _step.value;\n\n        if (backdropClassNames.has(targetClass)) {\n          hasBackdropClassName = true;\n        }\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    if (!hasBackdropClassName || !_this2.props.closeOnBackdropClick) {\n      return;\n    }\n\n    _this2.handleClose(event);\n  };\n\n  this.toggleFullscreen = function () {\n    _this2.setState(function (state) {\n      return {\n        isFullscreen: !state.isFullscreen\n      };\n    });\n  };\n\n  this.handleClose = function (event) {\n    var onClose = _this2.props.onClose;\n    var isFullscreen = _this2.state.isFullscreen;\n\n    _this2.setState({\n      isClosing: true\n    }); // force exit fullscreen mode on close\n\n\n    if (isFullscreen) {\n      _this2.toggleFullscreen();\n    } // call the consumer's onClose func\n\n\n    onClose(event);\n  };\n\n  this.getStyles = function (key, props) {\n    var base = defaultModalStyles[key](props);\n    base.boxSizing = 'border-box';\n    var custom = _this2.props.styles[key];\n    return custom ? custom(base, props) : base;\n  };\n}; // ==============================\n// Navigation\n// ==============================\n\n/* ARIA label for the next button */\n// NOTE: props aren't used by default for some getters but consumers may need\n// them, this needs to be reflected in the flow type.\n\n/* eslint-disable no-unused-vars */\n\n\nfunction getNextLabel(_ref) {\n  var currentIndex = _ref.currentIndex,\n      views = _ref.views;\n  return 'Show slide ' + (currentIndex + 2) + ' of ' + views.length;\n}\n/* ARIA label for the previous button */\n\n\nfunction getPrevLabel(_ref2) {\n  var currentIndex = _ref2.currentIndex,\n      views = _ref2.views;\n  return 'Show slide ' + currentIndex + ' of ' + views.length;\n}\n/* HTML title for the next button */\n\n\nfunction getNextTitle(props) {\n  return 'Next (right arrow)';\n}\n/* HTML title for the previous button */\n\n\nfunction getPrevTitle(props) {\n  return 'Previous (left arrow)';\n} // ==============================\n// Header\n// ==============================\n\n/* ARIA label for the close button */\n\n\nfunction getCloseLabel(props) {\n  return 'Close (esc)';\n}\n/* ARIA label for the fullscreen button */\n\n\nfunction getFullscreenLabel(_ref3) {\n  var isFullscreen = _ref3.isFullscreen;\n  return isFullscreen ? 'Exit fullscreen (f)' : 'Enter fullscreen (f)';\n} // ==============================\n// View\n// ==============================\n\n/* alt text for each image in the carousel */\n\n\nfunction getAltText(_ref4) {\n  var data = _ref4.data,\n      index = _ref4.index;\n  if (data.caption) return data.caption;\n  return 'Image ' + (index + 1);\n} // ==============================\n// Exports\n// ==============================\n\n\nvar formatters = {\n  getAltText: getAltText,\n  getNextLabel: getNextLabel,\n  getPrevLabel: getPrevLabel,\n  getNextTitle: getNextTitle,\n  getPrevTitle: getPrevTitle,\n  getCloseLabel: getCloseLabel,\n  getFullscreenLabel: getFullscreenLabel\n};\nvar viewPagerStyles = {\n  flex: '1 1 auto',\n  position: 'relative'\n};\nvar frameStyles = {\n  outline: 0\n};\nvar defaultProps$1 = {\n  currentIndex: 0,\n  formatters: formatters,\n  hideControlsWhenIdle: 3000,\n  showNavigationOnTouchDevice: false,\n  styles: {},\n  trackProps: {\n    instant: !isTouch(),\n    swipe: 'touch'\n  }\n};\nvar trackBaseClassName = componentBaseClassNames.Track;\n\nvar Carousel = function (_Component) {\n  inherits(Carousel, _Component);\n\n  function Carousel(props) {\n    classCallCheck(this, Carousel);\n\n    var _this = possibleConstructorReturn(this, (Carousel.__proto__ || Object.getPrototypeOf(Carousel)).call(this, props));\n\n    _initialiseProps$1.call(_this);\n\n    _this.cacheComponents(props.components);\n\n    _this.state = {\n      currentIndex: props.currentIndex,\n      interactionIsIdle: isTouch()\n    };\n    return _this;\n  } // TODO\n\n\n  createClass(Carousel, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _props = this.props,\n          hideControlsWhenIdle = _props.hideControlsWhenIdle,\n          modalProps = _props.modalProps;\n      var isModal = Boolean(modalProps);\n      this.mounted = true;\n\n      if (hideControlsWhenIdle && this.container) {\n        this.container.addEventListener('mousedown', this.handleMouseActivity);\n        this.container.addEventListener('mousemove', this.handleMouseActivity);\n        this.container.addEventListener('touchmove', this.handleMouseActivity);\n      }\n\n      if (isModal) {\n        this.focusViewFrame();\n      }\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.components !== this.props.components) {\n        this.cacheComponents(prevProps.components);\n      }\n\n      if (this.props.currentIndex !== prevProps.currentIndex) {\n        this.setState({\n          currentIndex: this.props.currentIndex\n        });\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.mounted = false;\n\n      if (this.props.hideControlsWhenIdle && this.container) {\n        this.container.removeEventListener('mousedown', this.handleMouseActivity);\n        this.container.removeEventListener('mousemove', this.handleMouseActivity);\n        this.container.removeEventListener('touchmove', this.handleMouseActivity);\n        this.handleMouseActivity.cancel();\n      }\n    } // ==============================\n    // Refs\n    // ==============================\n    // ==============================\n    // Utilities\n    // ==============================\n    // combine defaultProps with consumer props to maintain expected behaviour\n    // combine defaultProps with consumer props to maintain expected behaviour\n    // ==============================\n    // Handlers\n    // ==============================\n    // ==============================\n    // Renderers\n    // ==============================\n\n  }, {\n    key: 'getCommonProps',\n    value: function getCommonProps() {\n      var _props2 = this.props,\n          frameProps = _props2.frameProps,\n          trackProps = _props2.trackProps,\n          modalProps = _props2.modalProps,\n          views = _props2.views,\n          showNavigationOnTouchDevice = _props2.showNavigationOnTouchDevice;\n      var isModal = Boolean(modalProps);\n      var isFullscreen = Boolean(modalProps && modalProps.isFullscreen);\n      var _state = this.state,\n          currentIndex = _state.currentIndex,\n          interactionIsIdle = _state.interactionIsIdle;\n      var currentView = this.getViewData();\n      return {\n        carouselProps: this.props,\n        currentIndex: currentIndex,\n        currentView: currentView,\n        formatters: this.props.formatters,\n        frameProps: frameProps,\n        getStyles: this.getStyles,\n        showNavigationOnTouchDevice: showNavigationOnTouchDevice,\n        isFullscreen: isFullscreen,\n        isModal: isModal,\n        modalProps: modalProps,\n        interactionIsIdle: interactionIsIdle,\n        trackProps: trackProps,\n        views: views\n      };\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _components = this.components,\n          Container = _components.Container,\n          View = _components.View;\n      var currentIndex = this.state.currentIndex;\n      var _props3 = this.props,\n          frameProps = _props3.frameProps,\n          views = _props3.views;\n      var commonProps = this.commonProps = this.getCommonProps();\n      return glam(Container, _extends({}, commonProps, {\n        innerProps: {\n          innerRef: this.getContainer\n        }\n      }), this.renderHeader(), glam(ViewPager, {\n        tag: 'main',\n        style: viewPagerStyles,\n        className: className('pager')\n      }, glam(Frame, _extends({}, frameProps, {\n        ref: this.getFrame,\n        className: className('frame'),\n        style: frameStyles,\n        tabIndex: '-1'\n      }), glam(Track, _extends({}, this.getTrackProps(this.props), {\n        style: {\n          display: 'flex',\n          alignItems: 'center'\n        },\n        currentView: currentIndex,\n        className: className(trackBaseClassName),\n        onViewChange: this.handleViewChange,\n        ref: this.getTrack\n      }), views && views.map(function (data, index) {\n        return glam(View$1, {\n          className: className('view-wrapper'),\n          key: index\n        }, glam(View, _extends({}, commonProps, {\n          data: data,\n          index: index\n        })));\n      }))), this.renderNavigation()), this.renderFooter());\n    }\n  }]);\n  return Carousel;\n}(Component);\n\nCarousel.defaultProps = defaultProps$1;\n\nvar _initialiseProps$1 = function _initialiseProps() {\n  var _this2 = this;\n\n  this.mounted = false;\n\n  this.cacheComponents = function (comps) {\n    _this2.components = defaultCarouselComponents(comps);\n  };\n\n  this.getContainer = function (ref) {\n    _this2.container = ref;\n  };\n\n  this.getFooter = function (ref) {\n    _this2.footer = ref;\n  };\n\n  this.getFrame = function (ref) {\n    _this2.frame = findDOMNode(ref);\n  };\n\n  this.getHeader = function (ref) {\n    _this2.header = ref;\n  };\n\n  this.getTrack = function (ref) {\n    _this2.track = ref;\n  };\n\n  this.hasPreviousView = function () {\n    var trackProps = _this2.props.trackProps;\n    var currentIndex = _this2.state.currentIndex;\n    return trackProps.infinite || currentIndex !== 0;\n  };\n\n  this.hasNextView = function () {\n    var _props4 = _this2.props,\n        trackProps = _props4.trackProps,\n        views = _props4.views;\n    var currentIndex = _this2.state.currentIndex;\n    return trackProps.infinite || currentIndex !== views.length - 1;\n  };\n\n  this.getStyles = function (key, props) {\n    var base = defaultCarouselStyles[key](props);\n    base.boxSizing = 'border-box';\n    var custom = _this2.props.styles[key];\n    return custom ? custom(base, props) : base;\n  };\n\n  this.getTrackProps = function (props) {\n    return _extends({}, defaultProps$1.trackProps, props.trackProps);\n  };\n\n  this.getFormatters = function () {\n    return _extends({}, defaultProps$1.formatters, _this2.props.formatters);\n  };\n\n  this.getViewData = function () {\n    var views = _this2.props.views;\n    var currentIndex = _this2.state.currentIndex;\n    return views[currentIndex];\n  };\n\n  this.focusViewFrame = function () {\n    if (_this2.frame && document.activeElement !== _this2.frame) {\n      _this2.frame.focus();\n    }\n  };\n\n  this.prev = function (event) {\n    event.stopPropagation();\n\n    _this2.track.prev();\n\n    _this2.focusViewFrame();\n  };\n\n  this.next = function (event) {\n    event.stopPropagation();\n\n    _this2.track.next();\n\n    _this2.focusViewFrame();\n  };\n\n  this.handleMouseActivity = rafScheduler(function () {\n    clearTimeout(_this2.timer);\n\n    if (_this2.state.interactionIsIdle) {\n      _this2.setState({\n        interactionIsIdle: false\n      });\n    }\n\n    _this2.timer = setTimeout(function () {\n      if (_this2.mounted) {\n        _this2.setState({\n          interactionIsIdle: true\n        });\n      }\n    }, _this2.props.hideControlsWhenIdle);\n  });\n\n  this.handleViewChange = function (indicies) {\n    var trackProps = _this2.props.trackProps; // simplify by enforcing number\n\n    var currentIndex = indicies[0];\n\n    _this2.setState({\n      currentIndex: currentIndex\n    }); // call the consumer's onViewChange fn\n\n\n    if (trackProps && trackProps.onViewChange) {\n      trackProps.onViewChange(currentIndex);\n    }\n  };\n\n  this.renderNavigation = function () {\n    var _getFormatters = _this2.getFormatters(),\n        getNextLabel = _getFormatters.getNextLabel,\n        getPrevLabel = _getFormatters.getPrevLabel,\n        getNextTitle = _getFormatters.getNextTitle,\n        getPrevTitle = _getFormatters.getPrevTitle;\n\n    var _components2 = _this2.components,\n        Navigation = _components2.Navigation,\n        NavigationPrev = _components2.NavigationPrev,\n        NavigationNext = _components2.NavigationNext;\n    var commonProps = _this2.commonProps;\n\n    var showPrev = _this2.hasPreviousView();\n\n    var showNext = _this2.hasNextView();\n\n    var showNav = (showPrev || showNext) && Navigation;\n    return showNav ? glam(Navigation, commonProps, showPrev && glam(NavigationPrev, _extends({}, commonProps, {\n      align: 'left',\n      innerProps: {\n        'aria-label': getPrevLabel(commonProps),\n        onClick: _this2.prev,\n        title: getPrevTitle(commonProps)\n      }\n    })), showNext && glam(NavigationNext, _extends({}, commonProps, {\n      align: 'right',\n      innerProps: {\n        'aria-label': getNextLabel(commonProps),\n        onClick: _this2.next,\n        title: getNextTitle(commonProps)\n      }\n    }))) : null;\n  };\n\n  this.renderFooter = function () {\n    var _components3 = _this2.components,\n        Footer = _components3.Footer,\n        FooterCaption = _components3.FooterCaption,\n        FooterCount = _components3.FooterCount;\n    var commonProps = _this2.commonProps;\n    return Footer ? glam(Footer, _extends({}, commonProps, {\n      components: {\n        Caption: FooterCaption,\n        Count: FooterCount\n      },\n      innerProps: {\n        innerRef: _this2.getFooter\n      }\n    })) : null;\n  };\n\n  this.renderHeader = function () {\n    var _components4 = _this2.components,\n        Header = _components4.Header,\n        HeaderClose = _components4.HeaderClose,\n        HeaderFullscreen = _components4.HeaderFullscreen;\n\n    var _getFormatters2 = _this2.getFormatters(),\n        getCloseLabel = _getFormatters2.getCloseLabel,\n        getFullscreenLabel = _getFormatters2.getFullscreenLabel;\n\n    var commonProps = _this2.commonProps;\n    return Header ? glam(Header, _extends({}, commonProps, {\n      getCloseLabel: getCloseLabel,\n      getFullscreenLabel: getFullscreenLabel,\n      components: {\n        CloseButton: HeaderClose,\n        FullscreenButton: HeaderFullscreen\n      },\n      data: _this2.getViewData(),\n      innerProps: {\n        innerRef: _this2.getHeader\n      }\n    })) : null;\n  };\n};\n\nvar FirstChild = function FirstChild(_ref) {\n  var children = _ref.children;\n  return Children.toArray(children)[0] || null;\n};\n\nvar ModalGateway = function (_Component) {\n  inherits(ModalGateway, _Component);\n\n  function ModalGateway() {\n    classCallCheck(this, ModalGateway);\n    return possibleConstructorReturn(this, (ModalGateway.__proto__ || Object.getPrototypeOf(ModalGateway)).apply(this, arguments));\n  }\n\n  createClass(ModalGateway, [{\n    key: 'render',\n    value: function render() {\n      if (typeof window === 'undefined') return null;\n      var _props = this.props,\n          target = _props.target,\n          children = _props.children;\n      return createPortal(React.createElement(TransitionGroup, {\n        component: FirstChild,\n        children: children\n      }), target);\n    }\n  }]);\n  return ModalGateway;\n}(Component);\n\nModalGateway.defaultProps = {\n  target: typeof window !== 'undefined' ? document.body : null\n};\nexport default Carousel;\nexport { Modal, ModalGateway, carouselComponents, modalComponents };","map":{"version":3,"sources":["/home/matheus/Documents/UNB/MDS/ObraCerta/front/node_modules/react-images/dist/react-images.es.js"],"names":["React","cloneElement","Component","Children","findDOMNode","createPortal","glam","rafScheduler","ViewPager","Frame","Track","View","View$1","ParseHtml","FocusOn","Fullscreen","focusStore","Transition","TransitionGroup","classCallCheck","instance","Constructor","TypeError","createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","obj","value","_extends","assign","arguments","source","hasOwnProperty","call","inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","objectWithoutProperties","keys","indexOf","possibleConstructorReturn","self","ReferenceError","Base","_ref","css","innerRef","Tag","tag","ref","boxSizing","Button","Div","Img","Nav","Span","CLASS_PREFIX","className","name","state","arr","Array","isArray","_key","push","map","cn","join","isTouch","document","createEvent","e","containerCSS","isFullscreen","backgroundColor","display","flexDirection","height","Container","children","getStyles","isModal","innerProps","smallDevice","componentBaseClassNames","Header","Footer","Positioner","footerCSS","interactionIsIdle","alignItems","bottom","color","flex","fontSize","justifyContent","left","opacity","padding","position","right","transform","transition","zIndex","outline","footerBaseClassName","components","style","background","container","caption","count","Caption","Count","footerCaptionCSS","FooterCaption","currentView","footerCountCSS","flexShrink","marginLeft","FooterCount","currentIndex","views","activeView","totalViews","Svg","size","role","viewBox","fill","stroke","strokeWidth","width","ChevronLeft","_ref2","_ref2$size","undefined","d","ChevronRight","_ref3","_ref3$size","Close","_ref4","_ref4$size","FullscreenEnter","_ref5","_ref5$size","FullscreenExit","_ref6","_ref6$size","headerCSS","paddingBottom","top","headerBaseClassName","getCloseLabel","getFullscreenLabel","modalProps","allowFullscreen","onClose","toggleFullscreen","FsIcon","CloseButton","FullscreenButton","onClick","title","headerButtonCSS","border","cursor","headerFullscreenCSS","HeaderFullscreen","type","headerCloseCSS","HeaderClose","navigationCSS","Navigation","showNavigationOnTouchDevice","BUTTON_SIZE","navigationItemCSS","align","borderRadius","marginTop","navigationPrevCSS","NavigationPrev","_props$children","navigationNextCSS","NavigationNext","_props$children2","blanketCSS","Blanket","positionerCSS","dialogCSS","Dialog","removeFocusOn","getSource","data","_data$source","src","fullscreen","regular","viewCSS","lineHeight","textAlign","viewBaseClassName","formatters","index","alt","getAltText","maxHeight","maxWidth","userSelect","margin","carouselComponents","defaultCarouselComponents","providedComponents","modalComponents","defaultModalComponents","defaultCarouselStyles","footer","footerCaption","footerCount","header","headerClose","headerFullscreen","navigation","navigationPrev","navigationNext","view","defaultModalStyles","blanket","dialog","positioner","easing","verticalOffset","Fade","component","onEntered","onExited","inProp","in","originalProps","enter","exit","fadeStyle","fadeTransition","entering","entered","exiting","transitionDuration","createElement","appear","mountOnEnter","unmountOnExit","timeout","status","SlideUp","restingTransform","slideStyle","slideTransition","defaultProps","closeOnBackdropClick","closeOnEsc","preventScroll","styles","backdropClassNames","Set","Modal","_Component","_this","getPrototypeOf","_initialiseProps","cacheComponents","isClosing","componentDidUpdate","prevProps","getCommonProps","render","_components","_props","commonProps","transitionIn","handleClose","carouselComponent","enabled","onChange","handleFullscreenChange","handleBackdropClick","modalDidMount","modalWillUnmount","_this2","addEventListener","handleKeyUp","storeFocus","removeEventListener","restoreFocus","setState","comps","event","_props2","allowClose","hasBackdropClassName","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","classList","Symbol","iterator","_step","next","done","targetClass","has","err","return","base","custom","getNextLabel","getPrevLabel","getNextTitle","getPrevTitle","viewPagerStyles","frameStyles","defaultProps$1","hideControlsWhenIdle","trackProps","instant","swipe","trackBaseClassName","Carousel","_initialiseProps$1","componentDidMount","Boolean","mounted","handleMouseActivity","focusViewFrame","componentWillUnmount","cancel","frameProps","_state","getViewData","carouselProps","_props3","getContainer","renderHeader","getFrame","tabIndex","getTrackProps","onViewChange","handleViewChange","getTrack","renderNavigation","renderFooter","getFooter","frame","getHeader","track","hasPreviousView","infinite","hasNextView","_props4","getFormatters","activeElement","focus","prev","stopPropagation","clearTimeout","timer","setTimeout","indicies","_getFormatters","_components2","showPrev","showNext","showNav","_components3","_components4","_getFormatters2","FirstChild","toArray","ModalGateway","apply","window","body"],"mappings":"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","sourcesContent":["import React, { cloneElement, Component, Children } from 'react';\nimport { findDOMNode, createPortal } from 'react-dom';\nimport glam from 'glam';\nimport rafScheduler from 'raf-schd';\nimport { ViewPager, Frame, Track, View as View$1 } from 'react-view-pager';\nimport ParseHtml from 'html-react-parser';\nimport { FocusOn } from 'react-focus-on';\nimport Fullscreen from 'react-full-screen';\nimport focusStore from 'a11y-focus-store';\nimport { Transition, TransitionGroup } from 'react-transition-group';\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar defineProperty = function (obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar objectWithoutProperties = function (obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n};\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nvar Base = function Base(_ref) {\n  var css = _ref.css,\n      innerRef = _ref.innerRef,\n      Tag = _ref.tag,\n      props = objectWithoutProperties(_ref, ['css', 'innerRef', 'tag']);\n  return glam(Tag, _extends({\n    ref: innerRef,\n    css: _extends({\n      boxSizing: 'border-box'\n    }, css)\n  }, props));\n};\nvar Button = function Button(props) {\n  return glam(Base, _extends({ tag: 'button' }, props));\n};\nvar Div = function Div(props) {\n  return glam(Base, _extends({ tag: 'div' }, props));\n};\nvar Img = function Img(props) {\n  return glam(Base, _extends({ tag: 'img' }, props));\n};\nvar Nav = function Nav(props) {\n  return glam(Base, _extends({ tag: 'nav' }, props));\n};\nvar Span = function Span(props) {\n  return glam(Base, _extends({ tag: 'span' }, props));\n};\n\n// ==============================\n// Class Name Prefixer\n// ==============================\n\nvar CLASS_PREFIX = 'react-images';\n\n/**\r\n String representation of component state for styling with class names.\r\n\r\n Expects an array of strings OR a string/object pair:\r\n - className(['comp', 'comp-arg', 'comp-arg-2'])\r\n   @returns 'react-images__comp react-images__comp-arg react-images__comp-arg-2'\r\n - className('comp', { some: true, state: false })\r\n   @returns 'react-images__comp react-images__comp--some'\r\n*/\nfunction className(name, state) {\n  var arr = Array.isArray(name) ? name : [name];\n\n  // loop through state object, remove falsey values and combine with name\n  if (state && typeof name === 'string') {\n    for (var _key in state) {\n      if (state.hasOwnProperty(_key) && state[_key]) {\n        arr.push(name + '--' + _key);\n      }\n    }\n  }\n\n  // prefix everything and return a string\n  return arr.map(function (cn) {\n    return CLASS_PREFIX + '__' + cn;\n  }).join(' ');\n}\n\n// ==============================\n// Touch Capability Detector\n// ==============================\n\nfunction isTouch() {\n  try {\n    document.createEvent('TouchEvent');\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar containerCSS = function containerCSS(_ref) {\n  var isFullscreen = _ref.isFullscreen;\n  return {\n    backgroundColor: isFullscreen ? 'black' : null,\n    display: 'flex ',\n    flexDirection: 'column',\n    height: '100%'\n  };\n};\n\nvar Container = function Container(props) {\n  var children = props.children,\n      getStyles = props.getStyles,\n      isFullscreen = props.isFullscreen,\n      isModal = props.isModal,\n      innerProps = props.innerProps;\n\n  return glam(\n    Div,\n    _extends({\n      css: getStyles('container', props),\n      className: className('container', { isFullscreen: isFullscreen, isModal: isModal })\n    }, innerProps),\n    children\n  );\n};\n\nvar smallDevice = '@media (max-width: 769px)';\n\n/**\r\n * Used to get the HTML class to select specific components.\r\n * We call `className()` in utils with each of these to get the full className,\r\n * with prefixes.\r\n */\nvar componentBaseClassNames = {\n  Header: 'header',\n  Footer: 'footer',\n  View: 'view',\n  Track: 'track',\n  Positioner: 'positioner'\n};\n\nvar footerCSS = function footerCSS(_ref) {\n  var isModal = _ref.isModal,\n      interactionIsIdle = _ref.interactionIsIdle;\n  return defineProperty({\n    alignItems: 'top',\n    bottom: isModal ? 0 : null,\n    color: isModal ? 'rgba(255, 255, 255, 0.9)' : '#666',\n    display: 'flex ',\n    flex: '0 0 auto',\n    fontSize: 13,\n    justifyContent: 'space-between',\n    left: isModal ? 0 : null,\n    opacity: interactionIsIdle && isModal ? 0 : 1,\n    padding: isModal ? '30px 20px 20px' : '10px 0',\n    position: isModal ? 'absolute' : null,\n    right: isModal ? 0 : null,\n    transform: isModal ? 'translateY(' + (interactionIsIdle ? 10 : 0) + 'px)' : null,\n    transition: 'opacity 300ms, transform 300ms',\n    zIndex: isModal ? 1 : null,\n\n    '& *:focus': {\n      outline: '1.5px solid orange'\n    }\n\n  }, smallDevice, {\n    padding: isModal ? '20px 15px 15px' : '5px 0'\n  });\n};\n\nvar footerBaseClassName = componentBaseClassNames.Footer;\n\nvar Footer = function Footer(props) {\n  var components = props.components,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps,\n      isFullscreen = props.isFullscreen,\n      isModal = props.isModal;\n\n\n  var style = isModal ? { background: 'linear-gradient(rgba(0,0,0,0), rgba(0,0,0,0.33))' } : null;\n\n  var state = { isFullscreen: isFullscreen, isModal: isModal };\n  var cn = {\n    container: className(footerBaseClassName, state),\n    caption: className('footer__caption', state),\n    count: className('footer__count', state)\n  };\n  var css = {\n    container: getStyles(footerBaseClassName, props),\n    caption: getStyles('footerCaption', props),\n    count: getStyles('footerCount', props)\n  };\n  var Caption = components.Caption,\n      Count = components.Count;\n\n\n  return glam(\n    Div,\n    _extends({\n      css: css.container,\n      className: cn.container\n      // TODO glam prefixer fails on gradients\n      // https://github.com/threepointone/glam/issues/35\n      , style: style\n    }, innerProps),\n    glam(Caption, props),\n    glam(Count, props)\n  );\n};\n\n// ==============================\n// Inner Elements\n// ==============================\n\nvar footerCaptionCSS = function footerCaptionCSS() {\n  return {};\n};\n\nvar FooterCaption = function FooterCaption(props) {\n  var currentView = props.currentView,\n      getStyles = props.getStyles,\n      isFullscreen = props.isFullscreen,\n      isModal = props.isModal;\n  var caption = currentView.caption;\n\n  var state = { isFullscreen: isFullscreen, isModal: isModal };\n\n  return glam(\n    Span,\n    {\n      css: getStyles('footerCaption', props),\n      className: className('footer__caption', state)\n    },\n    typeof caption === 'string' ? ParseHtml('<span>' + caption + '</span>') : caption\n  );\n};\n\nvar footerCountCSS = function footerCountCSS() {\n  return { flexShrink: 0, marginLeft: '1em' };\n};\n\nvar FooterCount = function FooterCount(props) {\n  var currentIndex = props.currentIndex,\n      getStyles = props.getStyles,\n      isFullscreen = props.isFullscreen,\n      isModal = props.isModal,\n      views = props.views;\n\n  var state = { isFullscreen: isFullscreen, isModal: isModal };\n  var activeView = currentIndex + 1;\n  var totalViews = views.length;\n\n  if (!activeView || !totalViews) return null;\n\n  return glam(\n    Span,\n    {\n      css: getStyles('footerCount', props),\n      className: className('footer__count', state)\n    },\n    activeView,\n    ' of ',\n    totalViews\n  );\n};\n\nvar Svg = function Svg(_ref) {\n  var size = _ref.size,\n      props = objectWithoutProperties(_ref, ['size']);\n  return glam('svg', _extends({\n    role: 'presentation',\n    viewBox: '0 0 24 24',\n    css: {\n      display: 'inline-block',\n      fill: 'currentColor',\n      height: size,\n      stroke: 'currentColor',\n      strokeWidth: 0,\n      width: size\n    }\n  }, props));\n};\n\nvar ChevronLeft = function ChevronLeft(_ref2) {\n  var _ref2$size = _ref2.size,\n      size = _ref2$size === undefined ? 32 : _ref2$size,\n      props = objectWithoutProperties(_ref2, ['size']);\n  return glam(\n    Svg,\n    _extends({ size: size }, props),\n    glam('path', { d: 'M15.422 16.078l-1.406 1.406-6-6 6-6 1.406 1.406-4.594 4.594z' })\n  );\n};\nvar ChevronRight = function ChevronRight(_ref3) {\n  var _ref3$size = _ref3.size,\n      size = _ref3$size === undefined ? 32 : _ref3$size,\n      props = objectWithoutProperties(_ref3, ['size']);\n  return glam(\n    Svg,\n    _extends({ size: size }, props),\n    glam('path', { d: 'M9.984 6l6 6-6 6-1.406-1.406 4.594-4.594-4.594-4.594z' })\n  );\n};\nvar Close = function Close(_ref4) {\n  var _ref4$size = _ref4.size,\n      size = _ref4$size === undefined ? 32 : _ref4$size,\n      props = objectWithoutProperties(_ref4, ['size']);\n  return glam(\n    Svg,\n    _extends({ size: size }, props),\n    glam('path', { d: 'M18.984 6.422l-5.578 5.578 5.578 5.578-1.406 1.406-5.578-5.578-5.578 5.578-1.406-1.406 5.578-5.578-5.578-5.578 1.406-1.406 5.578 5.578 5.578-5.578z' })\n  );\n};\nvar FullscreenEnter = function FullscreenEnter(_ref5) {\n  var _ref5$size = _ref5.size,\n      size = _ref5$size === undefined ? 32 : _ref5$size,\n      props = objectWithoutProperties(_ref5, ['size']);\n  return glam(\n    Svg,\n    _extends({ size: size }, props),\n    glam('path', { d: 'M14.016 5.016h4.969v4.969h-1.969v-3h-3v-1.969zM17.016 17.016v-3h1.969v4.969h-4.969v-1.969h3zM5.016 9.984v-4.969h4.969v1.969h-3v3h-1.969zM6.984 14.016v3h3v1.969h-4.969v-4.969h1.969z' })\n  );\n};\nvar FullscreenExit = function FullscreenExit(_ref6) {\n  var _ref6$size = _ref6.size,\n      size = _ref6$size === undefined ? 32 : _ref6$size,\n      props = objectWithoutProperties(_ref6, ['size']);\n  return glam(\n    Svg,\n    _extends({ size: size }, props),\n    glam('path', { d: 'M15.984 8.016h3v1.969h-4.969v-4.969h1.969v3zM14.016 18.984v-4.969h4.969v1.969h-3v3h-1.969zM8.016 8.016v-3h1.969v4.969h-4.969v-1.969h3zM5.016 15.984v-1.969h4.969v4.969h-1.969v-3h-3z' })\n  );\n};\n\nvar headerCSS = function headerCSS(_ref) {\n  var interactionIsIdle = _ref.interactionIsIdle;\n  return {\n    alignItems: 'center',\n    display: 'flex ',\n    flex: '0 0 auto',\n    justifyContent: 'space-between',\n    opacity: interactionIsIdle ? 0 : 1,\n    padding: 10,\n    paddingBottom: 20,\n    position: 'absolute',\n    transform: 'translateY(' + (interactionIsIdle ? -10 : 0) + 'px)',\n    transition: 'opacity 300ms, transform 300ms',\n    top: 0,\n    left: 0,\n    right: 0,\n    zIndex: 1,\n    '& *:focus': {\n      outline: '1.5px solid orange'\n    }\n  };\n};\n\nvar headerBaseClassName = componentBaseClassNames.Header;\n\nvar Header = function Header(props) {\n  var components = props.components,\n      getStyles = props.getStyles,\n      getCloseLabel = props.getCloseLabel,\n      getFullscreenLabel = props.getFullscreenLabel,\n      innerProps = props.innerProps,\n      isModal = props.isModal,\n      modalProps = props.modalProps;\n\n\n  if (!isModal) return null;\n\n  var allowFullscreen = modalProps.allowFullscreen,\n      isFullscreen = modalProps.isFullscreen,\n      onClose = modalProps.onClose,\n      toggleFullscreen = modalProps.toggleFullscreen;\n\n  var FsIcon = isFullscreen ? FullscreenExit : FullscreenEnter;\n  var CloseButton = components.CloseButton,\n      FullscreenButton = components.FullscreenButton;\n\n  var state = { isFullscreen: isFullscreen, isModal: isModal };\n\n  return glam(\n    Div,\n    _extends({\n      css: getStyles(headerBaseClassName, props),\n      className: className(headerBaseClassName, state)\n      // TODO glam prefixer fails on gradients\n      // https://github.com/threepointone/glam/issues/35\n      , style: {\n        background: 'linear-gradient(rgba(0,0,0,0.33), rgba(0,0,0,0))'\n      }\n    }, innerProps),\n    glam('span', null),\n    glam(\n      'span',\n      null,\n      allowFullscreen ? glam(\n        FullscreenButton,\n        {\n          getStyles: getStyles,\n          innerProps: {\n            onClick: toggleFullscreen,\n            title: getFullscreenLabel(state)\n          }\n        },\n        glam(FsIcon, { size: 32 })\n      ) : null,\n      glam(\n        CloseButton,\n        {\n          getStyles: getStyles,\n          innerProps: {\n            onClick: onClose,\n            title: getCloseLabel(state)\n          }\n        },\n        glam(Close, { size: 32 })\n      )\n    )\n  );\n};\n\n// ==============================\n// Header Buttons\n// ==============================\n\nvar headerButtonCSS = function headerButtonCSS() {\n  return {\n    alignItems: 'center',\n    background: 0,\n    border: 0,\n    color: 'rgba(255, 255, 255, 0.75)',\n    cursor: 'pointer',\n    display: 'inline-flex ',\n    height: 44,\n    justifyContent: 'center',\n    outline: 0,\n    padding: 0,\n    position: 'relative',\n    width: 44,\n\n    '&:hover': {\n      color: 'white'\n    }\n  };\n};\n\nvar headerFullscreenCSS = headerButtonCSS;\nvar HeaderFullscreen = function HeaderFullscreen(props) {\n  var children = props.children,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps;\n\n\n  return glam(\n    Button,\n    _extends({\n      css: getStyles('headerFullscreen', props),\n      className: className(['header_button', 'header_button--fullscreen']),\n      type: 'button'\n    }, innerProps),\n    children\n  );\n};\n\nvar headerCloseCSS = headerButtonCSS;\nvar HeaderClose = function HeaderClose(props) {\n  var children = props.children,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps;\n\n\n  return glam(\n    Button,\n    _extends({\n      css: getStyles('headerClose', props),\n      className: className(['header_button', 'header_button--close']),\n      type: 'button'\n    }, innerProps),\n    children\n  );\n};\n\n// ==============================\n// Navigation\n// ==============================\n\nvar navigationCSS = function navigationCSS(_ref) {\n  var interactionIsIdle = _ref.interactionIsIdle;\n  return {\n    display: 'flex ',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    opacity: interactionIsIdle ? 0 : 1,\n    transition: 'opacity 300ms',\n    '& *:focus': {\n      outline: '1.5px solid orange'\n    }\n  };\n};\n\nvar Navigation = function Navigation(props) {\n  var children = props.children,\n      getStyles = props.getStyles,\n      isFullscreen = props.isFullscreen,\n      isModal = props.isModal,\n      showNavigationOnTouchDevice = props.showNavigationOnTouchDevice;\n\n  return !isTouch() || isTouch() && showNavigationOnTouchDevice ? glam(\n    Nav,\n    {\n      css: getStyles('navigation', props),\n      className: className('navigation', { isFullscreen: isFullscreen, isModal: isModal })\n    },\n    children\n  ) : null;\n};\n\n// ==============================\n// Nav Item\n// ==============================\n\nvar BUTTON_SIZE = 50;\n\nvar navigationItemCSS = function navigationItemCSS(_ref2) {\n  var _ref3;\n\n  var align = _ref2.align;\n  return _ref3 = {\n    alignItems: 'center',\n    background: 'rgba(255, 255, 255, 0.2)',\n    border: 0,\n    borderRadius: '50%',\n    color: 'white',\n    cursor: 'pointer',\n    display: 'flex ',\n    fontSize: 'inherit',\n    height: BUTTON_SIZE,\n    justifyContent: 'center',\n    marginTop: -(BUTTON_SIZE / 2),\n    outline: 0,\n    position: 'absolute',\n    top: '50%',\n    transition: 'background-color 200ms',\n    width: BUTTON_SIZE\n  }, defineProperty(_ref3, align, 20), defineProperty(_ref3, '&:hover', {\n    background: 'rgba(255, 255, 255, 0.3)'\n  }), defineProperty(_ref3, '&:active', {\n    background: 'rgba(255, 255, 255, 0.2)'\n  }), _ref3;\n};\n\nvar navigationPrevCSS = navigationItemCSS;\nvar NavigationPrev = function NavigationPrev(props) {\n  var _props$children = props.children,\n      children = _props$children === undefined ? glam(ChevronLeft, { size: 48 }) : _props$children,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps;\n\n\n  return glam(\n    Button,\n    _extends({\n      type: 'button',\n      css: getStyles('navigationPrev', props)\n    }, innerProps),\n    children\n  );\n};\n\nvar navigationNextCSS = navigationItemCSS;\nvar NavigationNext = function NavigationNext(props) {\n  var _props$children2 = props.children,\n      children = _props$children2 === undefined ? glam(ChevronRight, { size: 48 }) : _props$children2,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps;\n\n\n  return glam(\n    Button,\n    _extends({\n      type: 'button',\n      css: getStyles('navigationNext', props)\n    }, innerProps),\n    children\n  );\n};\n\n// ==============================\n// Blanket\n// ==============================\n\nvar blanketCSS = function blanketCSS(_ref) {\n  var isFullscreen = _ref.isFullscreen;\n  return {\n    backgroundColor: isFullscreen ? 'black' : 'rgba(0, 0, 0, 0.8)',\n    bottom: 0,\n    left: 0,\n    position: 'fixed',\n    right: 0,\n    top: 0,\n    zIndex: 1199\n  };\n};\n\nvar Blanket = function Blanket(props) {\n  var getStyles = props.getStyles,\n      innerProps = props.innerProps,\n      isFullscreen = props.isFullscreen;\n\n  return glam(Div, _extends({\n    css: getStyles('blanket', props),\n    className: className('blanket', { isFullscreen: isFullscreen })\n  }, innerProps));\n};\n\n// ==============================\n// Positioner\n// ==============================\n\nvar positionerCSS = function positionerCSS() {\n  return {\n    alignItems: 'center',\n    bottom: 0,\n    display: 'flex ',\n    justifyContent: 'center',\n    left: 0,\n    position: 'fixed',\n    right: 0,\n    top: 0,\n    zIndex: 1200\n  };\n};\n\nvar Positioner = function Positioner(props) {\n  var children = props.children,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps,\n      isFullscreen = props.isFullscreen;\n\n  return glam(\n    Div,\n    _extends({\n      css: getStyles(componentBaseClassNames.Positioner, props),\n      className: className(componentBaseClassNames.Positioner, { isFullscreen: isFullscreen })\n    }, innerProps),\n    children\n  );\n};\n\n// ==============================\n// Dialog\n// ==============================\n\nvar dialogCSS = function dialogCSS() {\n  return {\n    width: '100%'\n  };\n};\n\nvar Dialog = function Dialog(props) {\n  var children = props.children,\n      getStyles = props.getStyles,\n      innerProps = props.innerProps,\n      isFullscreen = props.isFullscreen,\n      removeFocusOn = props.removeFocusOn;\n\n\n  return removeFocusOn ? glam(\n    Div,\n    _extends({\n      css: getStyles('dialog', props),\n      className: className('dialog', { isFullscreen: isFullscreen })\n    }, innerProps),\n    children\n  ) : glam(\n    FocusOn,\n    null,\n    glam(\n      Div,\n      _extends({\n        css: getStyles('dialog', props),\n        className: className('dialog', { isFullscreen: isFullscreen })\n      }, innerProps),\n      children\n    )\n  );\n};\n\nfunction getSource(_ref) {\n  var data = _ref.data,\n      isFullscreen = _ref.isFullscreen;\n  var _data$source = data.source,\n      source = _data$source === undefined ? data.src : _data$source;\n\n  if (typeof source === 'string') return source;\n\n  return isFullscreen ? source.fullscreen : source.regular;\n}\n\nvar viewCSS = function viewCSS() {\n  return {\n    lineHeight: 0,\n    position: 'relative',\n    textAlign: 'center'\n  };\n};\n\nvar viewBaseClassName = componentBaseClassNames.View;\n\nvar View = function View(props) {\n  var data = props.data,\n      formatters = props.formatters,\n      getStyles = props.getStyles,\n      index = props.index,\n      isFullscreen = props.isFullscreen,\n      isModal = props.isModal;\n\n  var innerProps = {\n    alt: formatters.getAltText({ data: data, index: index }),\n    src: getSource({ data: data, isFullscreen: isFullscreen })\n  };\n\n  return glam(\n    Div,\n    {\n      css: getStyles(viewBaseClassName, props),\n      className: className(viewBaseClassName, { isFullscreen: isFullscreen, isModal: isModal })\n    },\n    glam(Img, _extends({}, innerProps, {\n      className: className('view-image', { isFullscreen: isFullscreen, isModal: isModal }),\n      css: {\n        height: 'auto',\n        maxHeight: '100%',\n        maxWidth: '100%',\n        userSelect: 'none',\n        margin: 'auto'\n      }\n    }))\n  );\n};\n\nvar carouselComponents = {\n  Container: Container,\n  Footer: Footer,\n  FooterCaption: FooterCaption,\n  FooterCount: FooterCount,\n  Header: Header,\n  HeaderClose: HeaderClose,\n  HeaderFullscreen: HeaderFullscreen,\n  Navigation: Navigation,\n  NavigationPrev: NavigationPrev,\n  NavigationNext: NavigationNext,\n  View: View\n};\n\nvar defaultCarouselComponents = function defaultCarouselComponents(providedComponents) {\n  return _extends({}, carouselComponents, providedComponents);\n};\n\n// ==============================\n// Modal\n// ==============================\n\nvar modalComponents = {\n  Blanket: Blanket,\n  Positioner: Positioner,\n  Dialog: Dialog\n};\n\nvar defaultModalComponents = function defaultModalComponents(providedComponents) {\n  return _extends({}, modalComponents, providedComponents);\n};\n\nvar defaultCarouselStyles = {\n  container: containerCSS,\n  footer: footerCSS,\n  footerCaption: footerCaptionCSS,\n  footerCount: footerCountCSS,\n  header: headerCSS,\n  headerClose: headerCloseCSS,\n  headerFullscreen: headerFullscreenCSS,\n  navigation: navigationCSS,\n  navigationPrev: navigationPrevCSS,\n  navigationNext: navigationNextCSS,\n  view: viewCSS\n};\nvar defaultModalStyles = {\n  blanket: blanketCSS,\n  dialog: dialogCSS,\n  positioner: positionerCSS\n};\n\nvar easing = 'cubic-bezier(0.23, 1, 0.32, 1)'; // easeOutQuint\nvar verticalOffset = 40;\n\n// ==============================\n// Fade\n// ==============================\n\nvar Fade = function Fade(_ref) {\n  var Tag = _ref.component,\n      onEntered = _ref.onEntered,\n      onExited = _ref.onExited,\n      inProp = _ref.in,\n      originalProps = _ref.innerProps,\n      props = objectWithoutProperties(_ref, ['component', 'onEntered', 'onExited', 'in', 'innerProps']);\n\n  var enter = 300;\n  var exit = 500;\n  var fadeStyle = {\n    transition: 'opacity 200ms',\n    opacity: 0\n  };\n  var fadeTransition = {\n    entering: { opacity: 0 },\n    entered: { opacity: 1 },\n    exiting: { opacity: 0, transitionDuration: exit + 'ms' }\n  };\n\n  return React.createElement(\n    Transition,\n    {\n      appear: true,\n      mountOnEnter: true,\n      unmountOnExit: true,\n      onEntered: onEntered,\n      onExited: onExited,\n      key: 'fade',\n      'in': inProp,\n      timeout: { enter: enter, exit: exit }\n    },\n    function (status) {\n      var innerProps = _extends({}, originalProps, {\n        style: _extends({}, fadeStyle, fadeTransition[status])\n      });\n\n      if (status === 'exited') return null;\n\n      return React.createElement(Tag, _extends({ innerProps: innerProps }, props));\n    }\n  );\n};\nvar SlideUp = function SlideUp(_ref2) {\n  var Tag = _ref2.component,\n      onEntered = _ref2.onEntered,\n      onExited = _ref2.onExited,\n      inProp = _ref2.in,\n      originalProps = _ref2.innerProps,\n      props = objectWithoutProperties(_ref2, ['component', 'onEntered', 'onExited', 'in', 'innerProps']);\n\n  var enter = 300;\n  var exit = 500;\n  var restingTransform = 'translate3d(0, 0, 0)';\n  var slideStyle = {\n    transition: 'transform ' + enter + 'ms ' + easing + ', opacity ' + enter + 'ms ' + easing,\n    transform: restingTransform\n  };\n  var slideTransition = {\n    entering: {\n      opacity: 0,\n      transform: 'translate3d(0, ' + verticalOffset + 'px, 0) scale(0.9)'\n    },\n    entered: {\n      opacity: 1,\n      transform: restingTransform\n    },\n    exiting: {\n      opacity: 0,\n      transform: 'translate3d(0, ' + verticalOffset + 'px, 0) scale(0.9)',\n      transition: 'transform ' + exit + 'ms ' + easing + ', opacity ' + exit + 'ms ' + easing\n    }\n  };\n\n  return React.createElement(\n    Transition,\n    {\n      appear: true,\n      'in': inProp,\n      mountOnEnter: true,\n      onEntered: onEntered,\n      onExited: onExited,\n      timeout: { enter: enter, exit: exit },\n      unmountOnExit: true\n    },\n    function (status) {\n      if (status === 'exited') return null;\n\n      var innerProps = _extends({}, originalProps, {\n        style: _extends({}, slideStyle, slideTransition[status])\n      });\n\n      return React.createElement(Tag, _extends({ innerProps: innerProps }, props));\n    }\n  );\n};\n\nvar defaultProps = {\n  allowFullscreen: !isTouch(),\n  closeOnBackdropClick: true,\n  closeOnEsc: true,\n  preventScroll: true,\n  styles: {}\n};\n\n/** Classes that when clicked on, close the backdrop */\nvar backdropClassNames = new Set([componentBaseClassNames.View, componentBaseClassNames.Header, componentBaseClassNames.Footer, componentBaseClassNames.Track, componentBaseClassNames.Positioner].map(className));\n\nvar Modal = function (_Component) {\n  inherits(Modal, _Component);\n\n  // TODO\n  function Modal(props) {\n    classCallCheck(this, Modal);\n\n    var _this = possibleConstructorReturn(this, (Modal.__proto__ || Object.getPrototypeOf(Modal)).call(this, props));\n\n    _initialiseProps.call(_this);\n\n    _this.cacheComponents(props.components);\n\n    _this.state = { isFullscreen: false, isClosing: false };\n    return _this;\n  }\n\n  createClass(Modal, [{\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.components !== this.props.components) {\n        this.cacheComponents(prevProps.components);\n      }\n    }\n\n    // emulate `componentDidMount` & `componentWillUnmount`\n    // called on complete of enter & exit transitions respectively\n\n  }, {\n    key: 'getCommonProps',\n    value: function getCommonProps() {\n      var isFullscreen = this.state.isFullscreen;\n\n\n      return {\n        getStyles: this.getStyles,\n        isFullscreen: isFullscreen,\n        modalProps: this.props\n      };\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _components = this.components,\n          Blanket = _components.Blanket,\n          Positioner = _components.Positioner,\n          Dialog = _components.Dialog;\n      var _props = this.props,\n          allowFullscreen = _props.allowFullscreen,\n          children = _props.children;\n      var isFullscreen = this.state.isFullscreen;\n\n      var commonProps = this.commonProps = this.getCommonProps();\n\n      // $FlowFixMe\n      var transitionIn = this.props.in;\n\n      // forward props to modal for use in internal components\n      var modalProps = {\n        allowFullscreen: allowFullscreen,\n        isFullscreen: isFullscreen,\n        onClose: this.handleClose,\n        preventScroll: this.preventScroll,\n        toggleFullscreen: this.toggleFullscreen\n      };\n\n      // augment user carousel with modal props\n      // $FlowFixMe\n      var carouselComponent = cloneElement(children, {\n        isModal: true,\n        modalProps: modalProps\n      });\n\n      return glam(\n        Fullscreen,\n        { enabled: isFullscreen, onChange: this.handleFullscreenChange },\n        glam(Fade, _extends({}, commonProps, { component: Blanket, 'in': transitionIn })),\n        glam(\n          SlideUp,\n          _extends({}, commonProps, {\n            component: Positioner,\n            'in': transitionIn,\n            innerProps: {\n              onClick: this.state.isClosing ? null : this.handleBackdropClick\n            },\n            onEntered: this.modalDidMount,\n            onExited: this.modalWillUnmount\n          }),\n          glam(\n            Dialog,\n            _extends({ removeFocusOn: this.state.isClosing }, commonProps),\n            carouselComponent\n          )\n        )\n      );\n    }\n  }]);\n  return Modal;\n}(Component);\n\nModal.defaultProps = defaultProps;\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this2 = this;\n\n  this.modalDidMount = function () {\n    document.addEventListener('keyup', _this2.handleKeyUp);\n    focusStore.storeFocus();\n  };\n\n  this.modalWillUnmount = function () {\n    document.removeEventListener('keyup', _this2.handleKeyUp);\n    focusStore.restoreFocus();\n    _this2.setState({ isClosing: false });\n  };\n\n  this.cacheComponents = function (comps) {\n    _this2.components = defaultModalComponents(comps);\n  };\n\n  this.handleFullscreenChange = function (isFullscreen) {\n    _this2.setState({ isFullscreen: isFullscreen });\n  };\n\n  this.handleKeyUp = function (event) {\n    var _props2 = _this2.props,\n        allowFullscreen = _props2.allowFullscreen,\n        closeOnEsc = _props2.closeOnEsc;\n    var isFullscreen = _this2.state.isFullscreen;\n\n    var allowClose = event.key === 'Escape' && closeOnEsc && !isFullscreen;\n\n    // toggle fullscreen\n    if (allowFullscreen && event.key === 'f') {\n      _this2.toggleFullscreen();\n    }\n\n    // close on escape when not fullscreen\n    if (allowClose) _this2.handleClose(event);\n  };\n\n  this.handleBackdropClick = function (event) {\n    var hasBackdropClassName = false;\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = event.target.classList[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var targetClass = _step.value;\n\n        if (backdropClassNames.has(targetClass)) {\n          hasBackdropClassName = true;\n        }\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    if (!hasBackdropClassName || !_this2.props.closeOnBackdropClick) {\n      return;\n    }\n\n    _this2.handleClose(event);\n  };\n\n  this.toggleFullscreen = function () {\n    _this2.setState(function (state) {\n      return { isFullscreen: !state.isFullscreen };\n    });\n  };\n\n  this.handleClose = function (event) {\n    var onClose = _this2.props.onClose;\n    var isFullscreen = _this2.state.isFullscreen;\n\n\n    _this2.setState({ isClosing: true });\n\n    // force exit fullscreen mode on close\n    if (isFullscreen) {\n      _this2.toggleFullscreen();\n    }\n\n    // call the consumer's onClose func\n    onClose(event);\n  };\n\n  this.getStyles = function (key, props) {\n    var base = defaultModalStyles[key](props);\n    base.boxSizing = 'border-box';\n    var custom = _this2.props.styles[key];\n    return custom ? custom(base, props) : base;\n  };\n};\n\n// ==============================\n// Navigation\n// ==============================\n\n/* ARIA label for the next button */\n\n\n// NOTE: props aren't used by default for some getters but consumers may need\n// them, this needs to be reflected in the flow type.\n\n/* eslint-disable no-unused-vars */\n\nfunction getNextLabel(_ref) {\n  var currentIndex = _ref.currentIndex,\n      views = _ref.views;\n\n  return 'Show slide ' + (currentIndex + 2) + ' of ' + views.length;\n}\n\n/* ARIA label for the previous button */\nfunction getPrevLabel(_ref2) {\n  var currentIndex = _ref2.currentIndex,\n      views = _ref2.views;\n\n  return 'Show slide ' + currentIndex + ' of ' + views.length;\n}\n\n/* HTML title for the next button */\nfunction getNextTitle(props) {\n  return 'Next (right arrow)';\n}\n\n/* HTML title for the previous button */\nfunction getPrevTitle(props) {\n  return 'Previous (left arrow)';\n}\n\n// ==============================\n// Header\n// ==============================\n\n/* ARIA label for the close button */\nfunction getCloseLabel(props) {\n  return 'Close (esc)';\n}\n/* ARIA label for the fullscreen button */\nfunction getFullscreenLabel(_ref3) {\n  var isFullscreen = _ref3.isFullscreen;\n\n  return isFullscreen ? 'Exit fullscreen (f)' : 'Enter fullscreen (f)';\n}\n\n// ==============================\n// View\n// ==============================\n\n/* alt text for each image in the carousel */\nfunction getAltText(_ref4) {\n  var data = _ref4.data,\n      index = _ref4.index;\n\n  if (data.caption) return data.caption;\n\n  return 'Image ' + (index + 1);\n}\n\n// ==============================\n// Exports\n// ==============================\n\nvar formatters = {\n  getAltText: getAltText,\n  getNextLabel: getNextLabel,\n  getPrevLabel: getPrevLabel,\n  getNextTitle: getNextTitle,\n  getPrevTitle: getPrevTitle,\n  getCloseLabel: getCloseLabel,\n  getFullscreenLabel: getFullscreenLabel\n};\n\nvar viewPagerStyles = {\n  flex: '1 1 auto',\n  position: 'relative'\n};\nvar frameStyles = { outline: 0 };\n\nvar defaultProps$1 = {\n  currentIndex: 0,\n  formatters: formatters,\n  hideControlsWhenIdle: 3000,\n  showNavigationOnTouchDevice: false,\n  styles: {},\n  trackProps: {\n    instant: !isTouch(),\n    swipe: 'touch'\n  }\n};\n\nvar trackBaseClassName = componentBaseClassNames.Track;\n\nvar Carousel = function (_Component) {\n  inherits(Carousel, _Component);\n\n  function Carousel(props) {\n    classCallCheck(this, Carousel);\n\n    var _this = possibleConstructorReturn(this, (Carousel.__proto__ || Object.getPrototypeOf(Carousel)).call(this, props));\n\n    _initialiseProps$1.call(_this);\n\n    _this.cacheComponents(props.components);\n\n    _this.state = {\n      currentIndex: props.currentIndex,\n      interactionIsIdle: isTouch()\n    };\n    return _this;\n  } // TODO\n\n\n  createClass(Carousel, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _props = this.props,\n          hideControlsWhenIdle = _props.hideControlsWhenIdle,\n          modalProps = _props.modalProps;\n\n      var isModal = Boolean(modalProps);\n\n      this.mounted = true;\n\n      if (hideControlsWhenIdle && this.container) {\n        this.container.addEventListener('mousedown', this.handleMouseActivity);\n        this.container.addEventListener('mousemove', this.handleMouseActivity);\n        this.container.addEventListener('touchmove', this.handleMouseActivity);\n      }\n      if (isModal) {\n        this.focusViewFrame();\n      }\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.components !== this.props.components) {\n        this.cacheComponents(prevProps.components);\n      }\n\n      if (this.props.currentIndex !== prevProps.currentIndex) {\n        this.setState({ currentIndex: this.props.currentIndex });\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.mounted = false;\n\n      if (this.props.hideControlsWhenIdle && this.container) {\n        this.container.removeEventListener('mousedown', this.handleMouseActivity);\n        this.container.removeEventListener('mousemove', this.handleMouseActivity);\n        this.container.removeEventListener('touchmove', this.handleMouseActivity);\n        this.handleMouseActivity.cancel();\n      }\n    }\n\n    // ==============================\n    // Refs\n    // ==============================\n\n    // ==============================\n    // Utilities\n    // ==============================\n\n    // combine defaultProps with consumer props to maintain expected behaviour\n\n    // combine defaultProps with consumer props to maintain expected behaviour\n\n\n    // ==============================\n    // Handlers\n    // ==============================\n\n    // ==============================\n    // Renderers\n    // ==============================\n\n  }, {\n    key: 'getCommonProps',\n    value: function getCommonProps() {\n      var _props2 = this.props,\n          frameProps = _props2.frameProps,\n          trackProps = _props2.trackProps,\n          modalProps = _props2.modalProps,\n          views = _props2.views,\n          showNavigationOnTouchDevice = _props2.showNavigationOnTouchDevice;\n\n      var isModal = Boolean(modalProps);\n      var isFullscreen = Boolean(modalProps && modalProps.isFullscreen);\n      var _state = this.state,\n          currentIndex = _state.currentIndex,\n          interactionIsIdle = _state.interactionIsIdle;\n\n      var currentView = this.getViewData();\n\n      return {\n        carouselProps: this.props,\n        currentIndex: currentIndex,\n        currentView: currentView,\n        formatters: this.props.formatters,\n        frameProps: frameProps,\n        getStyles: this.getStyles,\n        showNavigationOnTouchDevice: showNavigationOnTouchDevice,\n        isFullscreen: isFullscreen,\n        isModal: isModal,\n        modalProps: modalProps,\n        interactionIsIdle: interactionIsIdle,\n        trackProps: trackProps,\n        views: views\n      };\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _components = this.components,\n          Container = _components.Container,\n          View = _components.View;\n      var currentIndex = this.state.currentIndex;\n      var _props3 = this.props,\n          frameProps = _props3.frameProps,\n          views = _props3.views;\n\n      var commonProps = this.commonProps = this.getCommonProps();\n\n      return glam(\n        Container,\n        _extends({}, commonProps, { innerProps: { innerRef: this.getContainer } }),\n        this.renderHeader(),\n        glam(\n          ViewPager,\n          {\n            tag: 'main',\n            style: viewPagerStyles,\n            className: className('pager')\n          },\n          glam(\n            Frame,\n            _extends({}, frameProps, {\n              ref: this.getFrame,\n              className: className('frame'),\n              style: frameStyles,\n              tabIndex: '-1'\n            }),\n            glam(\n              Track,\n              _extends({}, this.getTrackProps(this.props), {\n                style: { display: 'flex', alignItems: 'center' },\n                currentView: currentIndex,\n                className: className(trackBaseClassName),\n                onViewChange: this.handleViewChange,\n                ref: this.getTrack\n              }),\n              views && views.map(function (data, index) {\n                return glam(\n                  View$1,\n                  { className: className('view-wrapper'), key: index },\n                  glam(View, _extends({}, commonProps, { data: data, index: index }))\n                );\n              })\n            )\n          ),\n          this.renderNavigation()\n        ),\n        this.renderFooter()\n      );\n    }\n  }]);\n  return Carousel;\n}(Component);\n\nCarousel.defaultProps = defaultProps$1;\n\nvar _initialiseProps$1 = function _initialiseProps() {\n  var _this2 = this;\n\n  this.mounted = false;\n\n  this.cacheComponents = function (comps) {\n    _this2.components = defaultCarouselComponents(comps);\n  };\n\n  this.getContainer = function (ref) {\n    _this2.container = ref;\n  };\n\n  this.getFooter = function (ref) {\n    _this2.footer = ref;\n  };\n\n  this.getFrame = function (ref) {\n    _this2.frame = findDOMNode(ref);\n  };\n\n  this.getHeader = function (ref) {\n    _this2.header = ref;\n  };\n\n  this.getTrack = function (ref) {\n    _this2.track = ref;\n  };\n\n  this.hasPreviousView = function () {\n    var trackProps = _this2.props.trackProps;\n    var currentIndex = _this2.state.currentIndex;\n\n\n    return trackProps.infinite || currentIndex !== 0;\n  };\n\n  this.hasNextView = function () {\n    var _props4 = _this2.props,\n        trackProps = _props4.trackProps,\n        views = _props4.views;\n    var currentIndex = _this2.state.currentIndex;\n\n\n    return trackProps.infinite || currentIndex !== views.length - 1;\n  };\n\n  this.getStyles = function (key, props) {\n    var base = defaultCarouselStyles[key](props);\n    base.boxSizing = 'border-box';\n    var custom = _this2.props.styles[key];\n    return custom ? custom(base, props) : base;\n  };\n\n  this.getTrackProps = function (props) {\n    return _extends({}, defaultProps$1.trackProps, props.trackProps);\n  };\n\n  this.getFormatters = function () {\n    return _extends({}, defaultProps$1.formatters, _this2.props.formatters);\n  };\n\n  this.getViewData = function () {\n    var views = _this2.props.views;\n    var currentIndex = _this2.state.currentIndex;\n\n\n    return views[currentIndex];\n  };\n\n  this.focusViewFrame = function () {\n    if (_this2.frame && document.activeElement !== _this2.frame) {\n      _this2.frame.focus();\n    }\n  };\n\n  this.prev = function (event) {\n    event.stopPropagation();\n    _this2.track.prev();\n    _this2.focusViewFrame();\n  };\n\n  this.next = function (event) {\n    event.stopPropagation();\n    _this2.track.next();\n    _this2.focusViewFrame();\n  };\n\n  this.handleMouseActivity = rafScheduler(function () {\n    clearTimeout(_this2.timer);\n\n    if (_this2.state.interactionIsIdle) {\n      _this2.setState({ interactionIsIdle: false });\n    }\n\n    _this2.timer = setTimeout(function () {\n      if (_this2.mounted) {\n        _this2.setState({ interactionIsIdle: true });\n      }\n    }, _this2.props.hideControlsWhenIdle);\n  });\n\n  this.handleViewChange = function (indicies) {\n    var trackProps = _this2.props.trackProps;\n\n    // simplify by enforcing number\n\n    var currentIndex = indicies[0];\n\n    _this2.setState({ currentIndex: currentIndex });\n\n    // call the consumer's onViewChange fn\n    if (trackProps && trackProps.onViewChange) {\n      trackProps.onViewChange(currentIndex);\n    }\n  };\n\n  this.renderNavigation = function () {\n    var _getFormatters = _this2.getFormatters(),\n        getNextLabel = _getFormatters.getNextLabel,\n        getPrevLabel = _getFormatters.getPrevLabel,\n        getNextTitle = _getFormatters.getNextTitle,\n        getPrevTitle = _getFormatters.getPrevTitle;\n\n    var _components2 = _this2.components,\n        Navigation = _components2.Navigation,\n        NavigationPrev = _components2.NavigationPrev,\n        NavigationNext = _components2.NavigationNext;\n    var commonProps = _this2.commonProps;\n\n\n    var showPrev = _this2.hasPreviousView();\n    var showNext = _this2.hasNextView();\n    var showNav = (showPrev || showNext) && Navigation;\n\n    return showNav ? glam(\n      Navigation,\n      commonProps,\n      showPrev && glam(NavigationPrev, _extends({}, commonProps, {\n        align: 'left',\n        innerProps: {\n          'aria-label': getPrevLabel(commonProps),\n          onClick: _this2.prev,\n          title: getPrevTitle(commonProps)\n        }\n      })),\n      showNext && glam(NavigationNext, _extends({}, commonProps, {\n        align: 'right',\n        innerProps: {\n          'aria-label': getNextLabel(commonProps),\n          onClick: _this2.next,\n          title: getNextTitle(commonProps)\n        }\n      }))\n    ) : null;\n  };\n\n  this.renderFooter = function () {\n    var _components3 = _this2.components,\n        Footer = _components3.Footer,\n        FooterCaption = _components3.FooterCaption,\n        FooterCount = _components3.FooterCount;\n    var commonProps = _this2.commonProps;\n\n\n    return Footer ? glam(Footer, _extends({}, commonProps, {\n      components: {\n        Caption: FooterCaption,\n        Count: FooterCount\n      },\n      innerProps: { innerRef: _this2.getFooter }\n    })) : null;\n  };\n\n  this.renderHeader = function () {\n    var _components4 = _this2.components,\n        Header = _components4.Header,\n        HeaderClose = _components4.HeaderClose,\n        HeaderFullscreen = _components4.HeaderFullscreen;\n\n    var _getFormatters2 = _this2.getFormatters(),\n        getCloseLabel = _getFormatters2.getCloseLabel,\n        getFullscreenLabel = _getFormatters2.getFullscreenLabel;\n\n    var commonProps = _this2.commonProps;\n\n\n    return Header ? glam(Header, _extends({}, commonProps, {\n      getCloseLabel: getCloseLabel,\n      getFullscreenLabel: getFullscreenLabel,\n      components: {\n        CloseButton: HeaderClose,\n        FullscreenButton: HeaderFullscreen\n      },\n      data: _this2.getViewData(),\n      innerProps: { innerRef: _this2.getHeader }\n    })) : null;\n  };\n};\n\nvar FirstChild = function FirstChild(_ref) {\n  var children = _ref.children;\n  return Children.toArray(children)[0] || null;\n};\n\nvar ModalGateway = function (_Component) {\n  inherits(ModalGateway, _Component);\n\n  function ModalGateway() {\n    classCallCheck(this, ModalGateway);\n    return possibleConstructorReturn(this, (ModalGateway.__proto__ || Object.getPrototypeOf(ModalGateway)).apply(this, arguments));\n  }\n\n  createClass(ModalGateway, [{\n    key: 'render',\n    value: function render() {\n      if (typeof window === 'undefined') return null;\n      var _props = this.props,\n          target = _props.target,\n          children = _props.children;\n\n      return createPortal(React.createElement(TransitionGroup, { component: FirstChild, children: children }), target);\n    }\n  }]);\n  return ModalGateway;\n}(Component);\n\nModalGateway.defaultProps = {\n  target: typeof window !== 'undefined' ? document.body : null\n};\n\nexport default Carousel;\nexport { Modal, ModalGateway, carouselComponents, modalComponents };\n"]},"metadata":{},"sourceType":"module"}