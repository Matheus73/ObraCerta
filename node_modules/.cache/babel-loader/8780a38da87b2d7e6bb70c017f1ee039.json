{"ast":null,"code":"var _jsxFileName = \"/home/matheus/Documents/UNB/MDS/ObraCerta/front/src/pages/EditarPerfil/index.js\";\nimport React, { Component } from 'react';\nimport ProfileAvatarEditor from '../../components/ProfileAvatarEditor';\nimport Button from '../../components/Button';\nimport GlobalStyle from './styles';\nimport Space from '../../components/Space';\nimport InputTextArea from '../../components/InputTextArea';\nimport Footer from '../../components/Footer';\nimport InputDropFile from '../../components/InputDropFile';\nimport { uniqueId } from 'loadsh';\nimport filesize from 'filesize';\nimport api from '../../services/api';\nimport InputSelect from '../../components/InputSelect';\n\nclass EditarPerfil extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      idUsuario: '',\n      novaImagem: '',\n      novoNomeCompleto: '',\n      novoEmail: '',\n      novoTelefone: '',\n      novaDescricao: '',\n      novaCategoria: '',\n      novaLocalidade: '',\n      uploadedPublicacoes: [],\n      uploadedNovaImagem: ''\n    };\n    this.onFormSubmit = this.onFormSubmit.bind(this);\n    this.handleNovaDescricao = this.handleNovaDescricao.bind(this);\n    this.handleNovaImagem = this.handleNovaImagem.bind(this);\n    this.handleNovaDescricao = this.handleNovaDescricao.bind(this);\n    this.handleNovaPublicacao = this.handleNovaPublicacao.bind(this);\n    this.handleNovaCategoria = this.handleNovaCategoria.bind(this);\n    this.handleNovaLocalidade = this.handleNovaLocalidade.bind(this);\n  }\n\n  onFormSubmit(event) {\n    event.preventDefault();\n    const url = '/usuario/' + localStorage.getItem('idUsuario');\n    const config = {\n      headers: {\n        'content-type': 'multipart/form-data',\n        Authorization: 'Bearer ' + localStorage.getItem('token')\n      }\n    };\n    const userData = new FormData();\n    userData.append('nomeCompleto', this.state.novoNomeCompleto);\n    userData.append('email', this.state.novoEmail);\n    userData.append('telefone', this.state.novoTelefone);\n    userData.append('descricao', this.state.novaDescricao);\n    userData.append('categoria', this.state.novaCategoria);\n    userData.append('localidade', this.state.novaLocalidade);\n    if (this.state.novaImagem !== '') userData.append('imagemPerfil', this.state.novaImagem, '.jpeg');\n    api.put(url, userData, config).then(response => {\n      if (this.state.novoNomeCompleto !== '') localStorage.setItem('name', this.state.novoNomeCompleto);\n      if (this.state.novoTelefone !== '') localStorage.setItem('telefone', this.state.novoTelefone);\n      if (this.state.novaCategoria !== '') localStorage.setItem('categoria', this.state.novaCategoria);\n      if (this.state.novaDescricao !== '') localStorage.setItem('descricao', this.state.novaDescricao);\n      if (this.state.novaLocalidade !== '') localStorage.setItem('localidade', this.state.novaLocalidade);\n      if (this.state.novaImagem !== '') localStorage.setItem('imagemPerfil', this.state.uploadedNovaImagem);\n      this.props.history.push('/');\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  handleNovaLocalidade(localidade) {\n    this.setState({\n      novaLocalidade: localidade\n    });\n  }\n\n  handleNovaCategoria(categoria) {\n    this.setState({\n      novaCategoria: categoria\n    });\n  }\n\n  handleNovaDescricao(descricao) {\n    this.setState({\n      novaDescricao: descricao\n    });\n  }\n\n  handleNovaImagem(canvas) {\n    if (canvas === '') {\n      this.setState({\n        novaImagem: '',\n        uploadedNovaImagem: ''\n      });\n    } else {\n      canvas.toBlob(blob => this.setState({\n        novaImagem: blob\n      }));\n      this.setState({\n        uploadedNovaImagem: canvas.toDataURL()\n      });\n    }\n  }\n\n  handleNovaPublicacao(images) {\n    const uploadedImages = images.map(file => ({\n      file,\n      id: uniqueId(),\n      name: file.name,\n      readbleSize: filesize(file.size),\n      preview: URL.createObjectURL(file),\n      progress: '0',\n      uploaded: false,\n      error: false,\n      url: null\n    }));\n    this.setState({\n      uploadedPublicacoes: this.state.uploadedPublicacoes.concat(uploadedImages)\n    });\n  }\n\n  uploadProcess(files, config) {\n    const url = '';\n    const data = new FormData(); // files.map( file => ({\n    //     data.append('file', file.file)\n    // }));\n\n    api.put(url, data, config).then(response => {\n      console.log(response);\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"main\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(GlobalStyle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onFormSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 25\n      }\n    }, \"Alterar perfil\"), /*#__PURE__*/React.createElement(Button, {\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 25\n      }\n    }, \"Salvar\"), /*#__PURE__*/React.createElement(Space, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(ProfileAvatarEditor, {\n      handleNovaImagem: this.handleNovaImagem,\n      src: localStorage.getItem('imagemPerfil'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Space, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(InputTextArea, {\n      defaultValue: localStorage.getItem('descricao'),\n      placeholder: \"Descreva voc\\xEA e seu trabalho aqui\",\n      onChange: e => this.handleNovaDescricao(e.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Space, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(InputSelect, {\n      label: \"Profiss\\xE3o:\",\n      onChange: e => this.handleNovaCategoria(e.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"N\\xE3o definido\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"Pedreiro\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 29\n      }\n    }, \"Pedreiro\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"Marceneiro\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 29\n      }\n    }, \"Marceneiro\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"Encanador\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 29\n      }\n    }, \"Encanador\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"Pintor\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 29\n      }\n    }, \"Pintor\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"Serralheiro\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 29\n      }\n    }, \"Serralheiro\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"Eletricista\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 29\n      }\n    }, \"Eletricista\")), /*#__PURE__*/React.createElement(InputSelect, {\n      label: \"Localidade:\",\n      onChange: e => this.handleNovaLocalidade(e.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"N\\xE3o definido\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"AC\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 29\n      }\n    }, \"Acre\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"AL\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 29\n      }\n    }, \"Alagoas\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"AP\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 29\n      }\n    }, \"Amap\\xE1\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"AM\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 29\n      }\n    }, \"Amazonas\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"BA\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 29\n      }\n    }, \"Bahia\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"CE\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 29\n      }\n    }, \"Cear\\xE1\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"DF\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 29\n      }\n    }, \"Distrito Federal\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"ES\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 29\n      }\n    }, \"Esp\\xEDrito Santo\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"GO\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 29\n      }\n    }, \"Goi\\xE1s\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"MA\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 29\n      }\n    }, \"Maranh\\xE3o\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"MT\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 29\n      }\n    }, \"Mato Grosso\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"MS\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 29\n      }\n    }, \"Mato Grosso do Sul\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"MG\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 29\n      }\n    }, \"Minas Gerais\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"PA\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 29\n      }\n    }, \"Par\\xE1\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"PB\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 29\n      }\n    }, \"Para\\xEDba\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"PR\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 29\n      }\n    }, \"Paran\\xE1\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"PE\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 29\n      }\n    }, \"Pernambuco\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"PI\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 29\n      }\n    }, \"Piau\\xED\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"RJ\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 29\n      }\n    }, \"Rio de Janeiro\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"RN\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 29\n      }\n    }, \"Rio Grande do Norte\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"RS\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 29\n      }\n    }, \"Rio Grande do Sul\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"RO\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 29\n      }\n    }, \"Rond\\xF4nia\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"RR\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 29\n      }\n    }, \"Roraima\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"SC\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 29\n      }\n    }, \"Santa Catarina\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"SP\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 29\n      }\n    }, \"S\\xE3o Paulo\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"SE\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 29\n      }\n    }, \"Sergipe\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"TO\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 29\n      }\n    }, \"Tocantins\")), /*#__PURE__*/React.createElement(Space, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(InputDropFile, {\n      handleNovaPublicacao: this.handleNovaPublicacao,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\n\nexport default EditarPerfil;","map":{"version":3,"sources":["/home/matheus/Documents/UNB/MDS/ObraCerta/front/src/pages/EditarPerfil/index.js"],"names":["React","Component","ProfileAvatarEditor","Button","GlobalStyle","Space","InputTextArea","Footer","InputDropFile","uniqueId","filesize","api","InputSelect","EditarPerfil","constructor","props","state","idUsuario","novaImagem","novoNomeCompleto","novoEmail","novoTelefone","novaDescricao","novaCategoria","novaLocalidade","uploadedPublicacoes","uploadedNovaImagem","onFormSubmit","bind","handleNovaDescricao","handleNovaImagem","handleNovaPublicacao","handleNovaCategoria","handleNovaLocalidade","event","preventDefault","url","localStorage","getItem","config","headers","Authorization","userData","FormData","append","put","then","response","setItem","history","push","catch","error","console","log","localidade","setState","categoria","descricao","canvas","toBlob","blob","toDataURL","images","uploadedImages","map","file","id","name","readbleSize","size","preview","URL","createObjectURL","progress","uploaded","concat","uploadProcess","files","data","render","e","target","value"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport ProfileAvatarEditor from '../../components/ProfileAvatarEditor';\nimport Button from '../../components/Button';\nimport GlobalStyle from './styles';\nimport Space from '../../components/Space';\nimport InputTextArea from '../../components/InputTextArea';\nimport Footer from '../../components/Footer';\nimport InputDropFile from '../../components/InputDropFile';\nimport { uniqueId } from 'loadsh';\nimport filesize from 'filesize';\nimport api from '../../services/api';\nimport InputSelect from '../../components/InputSelect';\n\nclass EditarPerfil extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            idUsuario: '',\n            novaImagem: '',\n            novoNomeCompleto: '',\n            novoEmail: '',\n            novoTelefone: '',\n            novaDescricao: '',\n            novaCategoria: '',\n            novaLocalidade: '',\n            uploadedPublicacoes: [],\n            uploadedNovaImagem: '',\n        };\n\n        this.onFormSubmit = this.onFormSubmit.bind(this);\n        this.handleNovaDescricao = this.handleNovaDescricao.bind(this);\n        this.handleNovaImagem = this.handleNovaImagem.bind(this);\n        this.handleNovaDescricao = this.handleNovaDescricao.bind(this);\n        this.handleNovaPublicacao = this.handleNovaPublicacao.bind(this);\n        this.handleNovaCategoria = this.handleNovaCategoria.bind(this);\n        this.handleNovaLocalidade = this.handleNovaLocalidade.bind(this);\n    }\n\n    onFormSubmit(event) {\n        event.preventDefault();\n        const url = '/usuario/' + localStorage.getItem('idUsuario');\n\n        const config = {\n            headers: {\n                'content-type': 'multipart/form-data',\n                Authorization: 'Bearer ' + localStorage.getItem('token'),\n            },\n        };\n\n        const userData = new FormData();\n            userData.append('nomeCompleto', this.state.novoNomeCompleto);\n            userData.append('email', this.state.novoEmail);\n            userData.append('telefone', this.state.novoTelefone);\n            userData.append('descricao', this.state.novaDescricao);\n            userData.append('categoria', this.state.novaCategoria);\n            userData.append('localidade', this.state.novaLocalidade);\n        if (this.state.novaImagem !== '')\n            userData.append('imagemPerfil', this.state.novaImagem, '.jpeg');\n\n        api.put(url, userData, config)\n            .then((response) => {\n                if (this.state.novoNomeCompleto !== '')\n                    localStorage.setItem('name', this.state.novoNomeCompleto);\n                if (this.state.novoTelefone !== '')\n                    localStorage.setItem('telefone', this.state.novoTelefone);\n                if (this.state.novaCategoria !== '')\n                    localStorage.setItem('categoria', this.state.novaCategoria);\n                if (this.state.novaDescricao !== '')\n                    localStorage.setItem('descricao', this.state.novaDescricao);\n                if (this.state.novaLocalidade !== '')\n                    localStorage.setItem('localidade', this.state.novaLocalidade);\n                if (this.state.novaImagem !== '')\n                    localStorage.setItem('imagemPerfil', this.state.uploadedNovaImagem);\n                this.props.history.push('/');\n            })\n            .catch((error) => {\n                console.log(error);\n            });\n    }\n\n    handleNovaLocalidade(localidade) {\n        this.setState({\n            novaLocalidade: localidade,\n        });\n    }\n\n    handleNovaCategoria(categoria) {\n        this.setState({\n            novaCategoria: categoria,\n        });\n    }\n\n    handleNovaDescricao(descricao) {\n        this.setState({\n            novaDescricao: descricao,\n        });\n    }\n\n    handleNovaImagem(canvas) {\n        if (canvas === '') {\n            this.setState({\n                novaImagem: '',\n                uploadedNovaImagem: '',\n            });\n        } else {\n            canvas.toBlob((blob) =>\n                this.setState({\n                    novaImagem: blob,\n                }),\n            );\n            this.setState({\n                uploadedNovaImagem: canvas.toDataURL(),\n            });\n        }\n    }\n\n    handleNovaPublicacao(images) {\n        const uploadedImages = images.map((file) => ({\n            file,\n            id: uniqueId(),\n            name: file.name,\n            readbleSize: filesize(file.size),\n            preview: URL.createObjectURL(file),\n            progress: '0',\n            uploaded: false,\n            error: false,\n            url: null,\n        }));\n\n        this.setState({\n            uploadedPublicacoes: this.state.uploadedPublicacoes.concat(\n                uploadedImages,\n            ),\n        });\n    }\n\n    uploadProcess(files, config) {\n        const url = '';\n        const data = new FormData();\n        // files.map( file => ({\n        //     data.append('file', file.file)\n        // }));\n\n        api.put(url, data, config)\n            .then((response) => {\n                console.log(response);\n            })\n            .catch((error) => {\n                console.log(error);\n            });\n    }\n\n    render() {\n        return (\n            <>\n                <main>\n                    <GlobalStyle />\n                    <form onSubmit={this.onFormSubmit}>\n                        <h1>Alterar perfil</h1>\n                        <Button type=\"submit\">Salvar</Button>\n                        <Space />\n                        <ProfileAvatarEditor\n                            handleNovaImagem={this.handleNovaImagem}\n                            src={localStorage.getItem('imagemPerfil')}\n                        />\n                        <Space />\n                        <InputTextArea\n                            defaultValue={localStorage.getItem('descricao')}\n                            placeholder=\"Descreva você e seu trabalho aqui\"\n                            onChange={(e) =>\n                                this.handleNovaDescricao(e.target.value)\n                            }\n                        />\n                        <Space />\n                        <InputSelect label=\"Profissão:\" onChange={e => this.handleNovaCategoria(e.target.value)}>\n                            <option value=\"Não definido\"></option>\n                            <option value=\"Pedreiro\">Pedreiro</option>\n                            <option value=\"Marceneiro\">Marceneiro</option>\n                            <option value=\"Encanador\">Encanador</option>\n                            <option value=\"Pintor\">Pintor</option>\n                            <option value=\"Serralheiro\">Serralheiro</option>\n                            <option value=\"Eletricista\">Eletricista</option>\n                        </InputSelect>\n                        <InputSelect label=\"Localidade:\" onChange={e => this.handleNovaLocalidade(e.target.value)}>\n                            <option value=\"Não definido\"></option>\n                            <option value=\"AC\">Acre</option>\n                            <option value=\"AL\">Alagoas</option>\n                            <option value=\"AP\">Amapá</option>\n                            <option value=\"AM\">Amazonas</option>\n                            <option value=\"BA\">Bahia</option>\n                            <option value=\"CE\">Ceará</option>\n                            <option value=\"DF\">Distrito Federal</option>\n                            <option value=\"ES\">Espírito Santo</option>\n                            <option value=\"GO\">Goiás</option>\n                            <option value=\"MA\">Maranhão</option>\n                            <option value=\"MT\">Mato Grosso</option>\n                            <option value=\"MS\">Mato Grosso do Sul</option>\n                            <option value=\"MG\">Minas Gerais</option>\n                            <option value=\"PA\">Pará</option>\n                            <option value=\"PB\">Paraíba</option>\n                            <option value=\"PR\">Paraná</option>\n                            <option value=\"PE\">Pernambuco</option>\n                            <option value=\"PI\">Piauí</option>\n                            <option value=\"RJ\">Rio de Janeiro</option>\n                            <option value=\"RN\">Rio Grande do Norte</option>\n                            <option value=\"RS\">Rio Grande do Sul</option>\n                            <option value=\"RO\">Rondônia</option>\n                            <option value=\"RR\">Roraima</option>\n                            <option value=\"SC\">Santa Catarina</option>\n                            <option value=\"SP\">São Paulo</option>\n                            <option value=\"SE\">Sergipe</option>\n                            <option value=\"TO\">Tocantins</option>\n                        </InputSelect>\n                        <Space />\n                        <InputDropFile\n                            handleNovaPublicacao={this.handleNovaPublicacao}\n                        />\n                    </form>\n                </main>\n                <Footer />\n            </>\n        );\n    }\n}\n\nexport default EditarPerfil;\n"]},"metadata":{},"sourceType":"module"}