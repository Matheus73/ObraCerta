{"ast":null,"code":"var _jsxFileName = \"/home/matheus/Documents/UNB/MDS/ObraCerta/front/src/pages/Cadastro/index.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport Button from '../../components/Button';\nimport Input from '../../components/Input';\nimport Footer from '../../components/Footer';\nimport GlobalStyle from './styles';\nimport Space from '../../components/Space';\nimport Input2Mask from '../../components/InputMask';\nimport Alert from '../../components/Alert';\n/**\n * Representauma  página de cadastro, possui 3 atributos state,url e UserData.\n * state consiste no conjunto de estados da tela, desde os inputs do usuario até os erros possiveis\n * url é a rota que será usada para requisições ao back\n * UserData são os dados do novo usuário já validados, separados para o envio da requisição\n */\n\nclass Cadastro extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleTermsClicked = () => {\n      this.setState({\n        terms: !this.state.terms\n      });\n    };\n\n    this.handleNameChange = event => {\n      this.setState({\n        name: event.target.value\n      });\n    };\n\n    this.handleEmailChange = event => {\n      this.setState({\n        email: event.target.value\n      });\n    };\n\n    this.handlePasswordChange = event => {\n      this.setState({\n        password: event.target.value\n      });\n    };\n\n    this.handlePhoneChange = event => {\n      this.setState({\n        phone: event.target.value\n      });\n    };\n\n    this.handleConfirmPasswordChange = event => {\n      this.setState({\n        confirm_password: event.target.value\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      var valid = this.validate();\n      const headers = {\n        'content-type': 'application/json'\n      };\n\n      if (valid) {\n        axios.post(this.url, this.userData, headers).then(response => {\n          this.props.handleLogin(response.data.dados);\n          localStorage.setItem('token', response.data.token);\n          localStorage.setItem('loggedIn', 'LOGGED_IN');\n          localStorage.setItem('idUsuario', response.data.dados.idUsuario);\n          localStorage.setItem('name', response.data.dados.nomeCompleto);\n          localStorage.setItem('email', response.data.dados.email);\n          localStorage.setItem('telefone', response.data.dados.telefone);\n          localStorage.setItem('localidade', response.data.dados.localidade);\n          localStorage.setItem('descricao', response.data.dados.descricao);\n          localStorage.setItem('categoria', response.data.dados.categoria);\n          localStorage.setItem('imagemPerfil', response.data.dados.imagemPerfil);\n          this.props.history.push('/');\n        }).catch(error => {\n          console.log(error);\n        });\n      }\n\n      this.render();\n    };\n\n    this.state = {\n      name: '',\n      email: '',\n      password: '',\n      phone: '',\n      confirm_password: '',\n      terms: false,\n      errEmail: '',\n      errPassword: '',\n      errConfirmPassword: '',\n      errTerms: '',\n      errPhone: ''\n    };\n    this.url = 'http://localhost:3001/registrar'; // Colocar a Url do back aqui\n\n    this.userData = {\n      nomeCompleto: '',\n      email: '',\n      senha: '',\n      telefone: ''\n    };\n  }\n\n  validate() {\n    var isCorrect = true;\n    let initial = this.state.email.substring(0, this.state.email.indexOf('@'));\n    let domain = this.state.email.substring(this.state.email.indexOf('@') + 1, this.state.email.length);\n\n    if (initial.length >= 1 && domain.length >= 3 && initial.search('@') === -1 && domain.search('@') === -1 && initial.search(' ') === -1 && domain.search(' ') === -1 && domain.search('.') !== -1 && domain.indexOf('.') >= 1 && domain.lastIndexOf('.') < domain.length - 1) {\n      // isCorrect = true;\n      this.setState({\n        errEmail: ''\n      });\n    } else {\n      isCorrect = false;\n      this.setState({\n        errEmail: 'Email inválido'\n      });\n    }\n\n    if (this.state.phone.replace(/\\D/gim, '').length < 10) {\n      isCorrect = false;\n      this.setState({\n        errPhone: 'Telefone Inválido'\n      });\n    } else {\n      this.setState({\n        errPhone: ''\n      });\n    }\n\n    if (this.state.password.length < 6) {\n      isCorrect = false;\n      this.setState({\n        errPassword: 'Sua senha deve possuir no minimo 6 digitos!'\n      });\n    }\n\n    if (this.state.password !== this.state.confirm_password) {\n      isCorrect = false;\n      this.setState({\n        errConfirmPassword: 'As senhas não correspodem'\n      });\n    }\n\n    if (!this.state.terms) {\n      isCorrect = false;\n      this.setState({\n        errTerms: 'Você precisa concordar com os termos de uso!'\n      });\n    }\n\n    if (isCorrect) {\n      this.setState({\n        errEmail: ''\n      });\n      this.setState({\n        errConfirmPassword: ''\n      });\n      this.setState({\n        errPassword: ''\n      });\n      this.userData.nomeCompleto = this.state.name;\n      this.userData.email = this.state.email;\n      this.userData.senha = this.state.password;\n      this.userData.telefone = this.state.phone.replace(/\\D/gim, '');\n    }\n\n    return isCorrect;\n  }\n\n  render() {\n    const {\n      name,\n      email,\n      password,\n      phone,\n      confirm_password,\n      terms,\n      errEmail,\n      errPassword,\n      errConfirmPassword,\n      errTerms,\n      errPhone\n    } = this.state;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(GlobalStyle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"main\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 21\n      }\n    }, \"CADASTRE-SE\"), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 25\n      }\n    }, \"Cadastre-se para ter acesso a plataforma e encontrar os melhores profissionais para sua obra ou para divulgar o seu trabalho!\"), /*#__PURE__*/React.createElement(Space, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 25\n      }\n    }, \"Nome:\", /*#__PURE__*/React.createElement(Input, {\n      type: \"text\",\n      id: \"name\",\n      name: \"name\",\n      placeholder: \"Digite seu nome\",\n      value: name,\n      onChange: this.handleNameChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(Space, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 25\n      }\n    }, \"Email:\", /*#__PURE__*/React.createElement(Input, {\n      type: \"email\",\n      id: \"email\",\n      name: \"email\",\n      placeholder: \"Digite seu email\",\n      value: email,\n      onChange: this.handleEmailChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(Alert, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 29\n      }\n    }, errEmail)), /*#__PURE__*/React.createElement(Space, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 25\n      }\n    }, \"Telefone:\", /*#__PURE__*/React.createElement(Input2Mask, {\n      type: \"text\",\n      id: \"phone\",\n      name: \"phone\",\n      alwaysShowMask: \"true\",\n      mask: \"(99) 99999-9999\",\n      value: phone,\n      onChange: this.handlePhoneChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(Alert, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 29\n      }\n    }, errPhone)), /*#__PURE__*/React.createElement(Space, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 25\n      }\n    }, \"Senha:\", /*#__PURE__*/React.createElement(Input, {\n      type: \"password\",\n      id: \"password\",\n      name: \"password\",\n      placeholder: \"Digite sua senha\",\n      value: password,\n      onChange: this.handlePasswordChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(Alert, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 29\n      }\n    }, errPassword)), /*#__PURE__*/React.createElement(Space, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 25\n      }\n    }, \"Confirme sua senha:\", /*#__PURE__*/React.createElement(Input, {\n      type: \"password\",\n      id: \"confirm_password\",\n      name: \"confirm_password\",\n      placeholder: \"Confirme sua senha\",\n      value: confirm_password,\n      onChange: this.handleConfirmPasswordChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(Alert, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 29\n      }\n    }, errConfirmPassword)), /*#__PURE__*/React.createElement(Space, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      id: \"user-terms\",\n      type: \"checkbox\",\n      name: \"terms\",\n      onClick: this.handleTermsClicked,\n      value: terms,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 29\n      }\n    }), \"Li e aceito os\", ' ', /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/termosdeuso\",\n      target: \"_blank\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 29\n      }\n    }, \"termos de uso\"), /*#__PURE__*/React.createElement(Alert, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 29\n      }\n    }, errTerms)), /*#__PURE__*/React.createElement(Space, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 25\n      }\n    }, \"Enviar\"))), /*#__PURE__*/React.createElement(Footer, {\n      orange: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\n\nexport default Cadastro;","map":{"version":3,"sources":["/home/matheus/Documents/UNB/MDS/ObraCerta/front/src/pages/Cadastro/index.js"],"names":["React","Component","axios","Button","Input","Footer","GlobalStyle","Space","Input2Mask","Alert","Cadastro","constructor","props","handleTermsClicked","setState","terms","state","handleNameChange","event","name","target","value","handleEmailChange","email","handlePasswordChange","password","handlePhoneChange","phone","handleConfirmPasswordChange","confirm_password","handleSubmit","preventDefault","valid","validate","headers","post","url","userData","then","response","handleLogin","data","dados","localStorage","setItem","token","idUsuario","nomeCompleto","telefone","localidade","descricao","categoria","imagemPerfil","history","push","catch","error","console","log","render","errEmail","errPassword","errConfirmPassword","errTerms","errPhone","senha","isCorrect","initial","substring","indexOf","domain","length","search","lastIndexOf","replace"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport Button from '../../components/Button';\nimport Input from '../../components/Input';\nimport Footer from '../../components/Footer';\nimport GlobalStyle from './styles';\nimport Space from '../../components/Space';\nimport Input2Mask from '../../components/InputMask';\nimport Alert from '../../components/Alert';\n\n/**\n * Representauma  página de cadastro, possui 3 atributos state,url e UserData.\n * state consiste no conjunto de estados da tela, desde os inputs do usuario até os erros possiveis\n * url é a rota que será usada para requisições ao back\n * UserData são os dados do novo usuário já validados, separados para o envio da requisição\n */\nclass Cadastro extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            name: '',\n            email: '',\n            password: '',\n            phone: '',\n            confirm_password: '',\n            terms: false,\n            errEmail: '',\n            errPassword: '',\n            errConfirmPassword: '',\n            errTerms: '',\n            errPhone: '',\n        };\n\n        this.url = 'http://localhost:3001/registrar'; // Colocar a Url do back aqui\n\n        this.userData = {\n            nomeCompleto: '',\n            email: '',\n            senha: '',\n            telefone: '',\n        };\n    }\n\n    validate() {\n        var isCorrect = true;\n        let initial = this.state.email.substring(\n            0,\n            this.state.email.indexOf('@'),\n        );\n        let domain = this.state.email.substring(\n            this.state.email.indexOf('@') + 1,\n            this.state.email.length,\n        );\n        if (\n            initial.length >= 1 &&\n            domain.length >= 3 &&\n            initial.search('@') === -1 &&\n            domain.search('@') === -1 &&\n            initial.search(' ') === -1 &&\n            domain.search(' ') === -1 &&\n            domain.search('.') !== -1 &&\n            domain.indexOf('.') >= 1 &&\n            domain.lastIndexOf('.') < domain.length - 1\n        ) {\n            // isCorrect = true;\n            this.setState({\n                errEmail: '',\n            });\n        } else {\n            isCorrect = false;\n            this.setState({\n                errEmail: 'Email inválido',\n            });\n        }\n        if (this.state.phone.replace(/\\D/gim, '').length < 10) {\n            isCorrect = false;\n            this.setState({\n                errPhone: 'Telefone Inválido',\n            });\n        } else {\n            this.setState({\n                errPhone: '',\n            });\n        }\n        if (this.state.password.length < 6) {\n            isCorrect = false;\n            this.setState({\n                errPassword: 'Sua senha deve possuir no minimo 6 digitos!',\n            });\n        }\n        if (this.state.password !== this.state.confirm_password) {\n            isCorrect = false;\n            this.setState({\n                errConfirmPassword: 'As senhas não correspodem',\n            });\n        }\n        if (!this.state.terms) {\n            isCorrect = false;\n            this.setState({\n                errTerms: 'Você precisa concordar com os termos de uso!',\n            });\n        }\n        if (isCorrect) {\n            this.setState({\n                errEmail: '',\n            });\n            this.setState({\n                errConfirmPassword: '',\n            });\n            this.setState({\n                errPassword: '',\n            });\n            this.userData.nomeCompleto = this.state.name;\n            this.userData.email = this.state.email;\n            this.userData.senha = this.state.password;\n            this.userData.telefone = this.state.phone.replace(/\\D/gim, '');\n        }\n        return isCorrect;\n    }\n\n    handleTermsClicked = () => {\n        this.setState({\n            terms: !this.state.terms,\n        });\n    };\n\n    handleNameChange = (event) => {\n        this.setState({\n            name: event.target.value,\n        });\n    };\n\n    handleEmailChange = (event) => {\n        this.setState({\n            email: event.target.value,\n        });\n    };\n\n    handlePasswordChange = (event) => {\n        this.setState({\n            password: event.target.value,\n        });\n    };\n\n    handlePhoneChange = (event) => {\n        this.setState({\n            phone: event.target.value,\n        });\n    };\n\n    handleConfirmPasswordChange = (event) => {\n        this.setState({\n            confirm_password: event.target.value,\n        });\n    };\n\n    handleSubmit = (event) => {\n        event.preventDefault();\n        var valid = this.validate();\n        const headers = {\n            'content-type': 'application/json',\n        };\n\n        if (valid) {\n            axios\n                .post(this.url, this.userData, headers)\n                .then((response) => {\n                    this.props.handleLogin(response.data.dados);\n                    localStorage.setItem('token', response.data.token);\n                    localStorage.setItem('loggedIn', 'LOGGED_IN');\n                    localStorage.setItem(\n                        'idUsuario',\n                        response.data.dados.idUsuario,\n                    );\n                    localStorage.setItem(\n                        'name',\n                        response.data.dados.nomeCompleto,\n                    );\n                    localStorage.setItem('email', response.data.dados.email);\n                    localStorage.setItem(\n                        'telefone',\n                        response.data.dados.telefone,\n                    );\n                    localStorage.setItem(\n                        'localidade',\n                        response.data.dados.localidade,\n                    );\n                    localStorage.setItem(\n                        'descricao',\n                        response.data.dados.descricao,\n                    );\n                    localStorage.setItem(\n                        'categoria',\n                        response.data.dados.categoria,\n                    );\n                    localStorage.setItem(\n                        'imagemPerfil',\n                        response.data.dados.imagemPerfil,\n                    );\n                    this.props.history.push('/');\n                })\n                .catch((error) => {\n                    console.log(error);\n                });\n        }\n        this.render();\n    };\n\n    render() {\n        const {\n            name,\n            email,\n            password,\n            phone,\n            confirm_password,\n            terms,\n            errEmail,\n            errPassword,\n            errConfirmPassword,\n            errTerms,\n            errPhone,\n        } = this.state;\n        return (\n            <>\n                <GlobalStyle />\n                <main>\n                    <h1>CADASTRE-SE</h1>\n                    <form onSubmit={this.handleSubmit}>\n                        <p>\n                            Cadastre-se para ter acesso a plataforma e encontrar\n                            os melhores profissionais para sua obra ou para\n                            divulgar o seu trabalho!\n                        </p>\n                        <Space />\n                        <label>\n                            Nome:\n                            <Input\n                                type=\"text\"\n                                id=\"name\"\n                                name=\"name\"\n                                placeholder=\"Digite seu nome\"\n                                value={name}\n                                onChange={this.handleNameChange}\n                            />\n                        </label>\n                        <Space />\n                        <label>\n                            Email:\n                            <Input\n                                type=\"email\"\n                                id=\"email\"\n                                name=\"email\"\n                                placeholder=\"Digite seu email\"\n                                value={email}\n                                onChange={this.handleEmailChange}\n                            />\n                            <Alert>{errEmail}</Alert>\n                        </label>\n                        <Space />\n                        <label>\n                            Telefone:\n                            <Input2Mask\n                                type=\"text\"\n                                id=\"phone\"\n                                name=\"phone\"\n                                alwaysShowMask=\"true\"\n                                mask=\"(99) 99999-9999\"\n                                value={phone}\n                                onChange={this.handlePhoneChange}\n                            />\n                            <Alert>{errPhone}</Alert>\n                        </label>\n                        <Space />\n                        <label>\n                            Senha:\n                            <Input\n                                type=\"password\"\n                                id=\"password\"\n                                name=\"password\"\n                                placeholder=\"Digite sua senha\"\n                                value={password}\n                                onChange={this.handlePasswordChange}\n                            />\n                            <Alert>{errPassword}</Alert>\n                        </label>\n                        <Space />\n                        <label>\n                            Confirme sua senha:\n                            <Input\n                                type=\"password\"\n                                id=\"confirm_password\"\n                                name=\"confirm_password\"\n                                placeholder=\"Confirme sua senha\"\n                                value={confirm_password}\n                                onChange={this.handleConfirmPasswordChange}\n                            />\n                            <Alert>{errConfirmPassword}</Alert>\n                        </label>\n\n                        <Space />\n                        <label>\n                            <input\n                                id=\"user-terms\"\n                                type=\"checkbox\"\n                                name=\"terms\"\n                                onClick={this.handleTermsClicked}\n                                value={terms}\n                            />\n                            Li e aceito os{' '}\n                            <a href=\"/termosdeuso\" target=\"_blank\">\n                                termos de uso\n                            </a>\n                            <Alert>{errTerms}</Alert>\n                        </label>\n\n                        <Space />\n                        <Button>Enviar</Button>\n                    </form>\n                </main>\n                <Footer orange />\n            </>\n        );\n    }\n}\n\nexport default Cadastro\n"]},"metadata":{},"sourceType":"module"}